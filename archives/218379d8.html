<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>若依框架 | Norlcyan's Blog</title><meta name="author" content="Zhao"><meta name="copyright" content="Zhao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="什么使用若依框架 快速开发：若依框架提供了许多现成的模块和工具，能够快速搭建起一个基本的应用框架，从而减少了开发的时间和工作量 高度可定制性：若依框架提供了丰富的插件和扩展点，可以根据项目的需求进行定制和扩展，满足不同项目的特定需求 简化开发流程：若依框架提供了许多常用的功能模块，如权限管理、数据字典、定时任务等，能够简化开发流程，提高开发效率 易于维护和管理：若依框架采用了模块化的设计，代码结构">
<meta property="og:type" content="article">
<meta property="og:title" content="若依框架">
<meta property="og:url" content="http://example.com/archives/218379d8.html">
<meta property="og:site_name" content="Norlcyan&#39;s Blog">
<meta property="og:description" content="什么使用若依框架 快速开发：若依框架提供了许多现成的模块和工具，能够快速搭建起一个基本的应用框架，从而减少了开发的时间和工作量 高度可定制性：若依框架提供了丰富的插件和扩展点，可以根据项目的需求进行定制和扩展，满足不同项目的特定需求 简化开发流程：若依框架提供了许多常用的功能模块，如权限管理、数据字典、定时任务等，能够简化开发流程，提高开发效率 易于维护和管理：若依框架采用了模块化的设计，代码结构">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/avatar.jpg">
<meta property="article:published_time" content="2026-01-15T11:46:31.000Z">
<meta property="article:modified_time" content="2026-01-15T13:28:07.075Z">
<meta property="article:author" content="Zhao">
<meta property="article:tag" content="后端">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="低代码平台">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/z.png"><link rel="canonical" href="http://example.com/archives/218379d8.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '若依框架',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-01-15 21:28:07'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/footer.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/bodybg.css"><meta name="generator" content="Hexo 7.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">142</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-comments"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Norlcyan's Blog"><span class="site-name">Norlcyan's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-comments"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">若依框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-01-15T11:46:31.000Z" title="发表于 2026-01-15 19:46:31">2026-01-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-01-15T13:28:07.075Z" title="更新于 2026-01-15 21:28:07">2026-01-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B6/">若依框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="若依框架"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="什么使用若依框架"><a href="#什么使用若依框架" class="headerlink" title="什么使用若依框架"></a>什么使用若依框架</h1><ol>
<li>快速开发：若依框架提供了许多现成的模块和工具，能够快速搭建起一个基本的应用框架，从而减少了开发的时间和工作量</li>
<li>高度可定制性：若依框架提供了丰富的插件和扩展点，可以根据项目的需求进行定制和扩展，满足不同项目的特定需求</li>
<li>简化开发流程：若依框架提供了许多常用的功能模块，如权限管理、数据字典、定时任务等，能够简化开发流程，提高开发效率</li>
<li>易于维护和管理：若依框架采用了模块化的设计，代码结构清晰，易于维护和管理，有助于降低项目的维护成本</li>
<li>社区支持和更新迭代：若依框架有一个活跃的开发社区，能够及时提供技术支持和更新迭代，保证项目的稳定性和安全性</li>
</ol>
<h1 id="若依框架基本介绍"><a href="#若依框架基本介绍" class="headerlink" title="若依框架基本介绍"></a>若依框架基本介绍</h1><p>若依（RuoYi）框架是一款基于<strong>SpringBoot</strong>、<strong>SpringCloud</strong>等开源框架搭建的企业级开发平台。它的主要目标是提供全面的解决方案，以简化企业级应用开发，提高开发效率。以下是对若依框架的详细介绍：</p>
<ol>
<li><strong>模块化设计</strong>：若依框架采用模块化的设计，使得应用可以根据需求进行灵活的扩展和定制。每个模块都可以独立部署和升级，这大大提高了系统的可维护性和可扩展性</li>
<li><strong>前后端分离</strong>：框架采用前后端分离的开发模式，后端专注于数据处理和API接口的提供，前端负责页面的展示和用户交互。这种模式使得前后端职责明确，进一步提高了开发效率和代码的可维护性</li>
<li><strong>权限管理</strong>：若依框架提供了完善的用户权限管理功能，包括角色管理、菜单授权、部门管理等，便于对系统权限进行灵活的配置和管理</li>
<li><strong>代码生成器</strong>：框架内置代码生成器，能够快速生成前后端代码，减少重复劳动，提高开发效率。通过简单的配置即可生成基础的增删改查代码</li>
<li><strong>定时任务</strong>：若依框架集成了定时任务模块，支持动态添加定时任务，可以通过界面对定时任务进行管理与调度。此外，框架还能实时查看系统运行日志和在线用户信息，监控服务状态和性能</li>
<li><strong>易于集成</strong>：若依框架可以轻松地与其他常用技术栈集成，如MySQL、Redis、消息队列等。这使得开发者可以根据项目需求灵活地选择合适的技术组件，降低技术门槛和成本</li>
</ol>
<p>此外，若依框架还集成了许多常用功能模块，如文件上传和下载、消息推送、数据字典、日志管理等等</p>
<p>总的来说，若依框架是一款<strong>功能丰富、易于扩展和定制</strong>的企业级开发平台，适用于各种Web应用程序的开发。它能够帮助开发者快速构建功能完备的应用，提高开发效率，降低维护成本</p>
<p>官网地址：<a target="_blank" rel="noopener" href="https://ruoyi.vip/">RuoYi 若依官方网站</a></p>
<p>官方文档地址：<a target="_blank" rel="noopener" href="https://doc.ruoyi.vip/ruoyi/">介绍 | RuoYi</a></p>
<p>若依框架分为四个版本：</p>
<ul>
<li>前后端不分离版RuoYi（单体）</li>
<li>前后端分离版RuoYi-Vue（单体）</li>
<li>微服务版RuoYi-Cloud</li>
<li>移动端版RuoYi-App</li>
</ul>
<h1 id="RuoYi-Vue快速入门"><a href="#RuoYi-Vue快速入门" class="headerlink" title="RuoYi-Vue快速入门"></a>RuoYi-Vue快速入门</h1><p>官方文档地址：<a target="_blank" rel="noopener" href="https://doc.ruoyi.vip/ruoyi-vue/">介绍 | RuoYi-Vue</a></p>
<h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><p>由于若依框架中的某些技术版本和当前项目的版本不一致，所以需要对其单独进行修改：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_15-28-52.png" alt="Snipaste_2025-08-29_15-28-52"></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><table>
<thead>
<tr>
<th>官方推荐</th>
<th>优化升级</th>
</tr>
</thead>
<tbody><tr>
<td>JDK &gt;&#x3D; 1.8 (推荐1.8版本)</td>
<td>升级为JDK 11  资料中提供了安装包</td>
</tr>
<tr>
<td>Maven &gt;&#x3D; 3.0</td>
<td>不需要安装，直接使用IDEA中自带的Maven即可</td>
</tr>
<tr>
<td>Node &gt;&#x3D; 12</td>
<td>前端代码由vue2升级为vue3，需要Node 18及以上的版本</td>
</tr>
<tr>
<td>Mysql &gt;&#x3D; 5.7.0 (推荐5.7版本)</td>
<td>升级为MySQL 8</td>
</tr>
<tr>
<td>Redis &gt;&#x3D; 3.0</td>
<td>本地启动</td>
</tr>
</tbody></table>
<p>资料中的CentOS运行在VMWare中，系统中已经在Docker容器中部署了MySQL和Redis</p>
<p>资料的下载地址：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1qel7_7nCNzTrqjlZAh-goA?pwd=ez4h">https://pan.baidu.com/s/1qel7_7nCNzTrqjlZAh-goA?pwd=ez4h</a></p>
<p>Centos用户名root，密码：1234</p>
<table>
<thead>
<tr>
<th><strong>软件名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>MySQL</td>
<td>默认用户名：root，默认密码：heima123，端口：3306</td>
</tr>
<tr>
<td>Redis</td>
<td>默认密码：123456，端口：6379</td>
</tr>
</tbody></table>
<h2 id="运行后端项目"><a href="#运行后端项目" class="headerlink" title="运行后端项目"></a>运行后端项目</h2><ul>
<li>代码下载地址：<a target="_blank" rel="noopener" href="https://gitee.com/y_project/RuoYi-Vue">https://gitee.com/y_project/RuoYi-Vue</a></li>
<li>由于若依提供的代码的包名和项目名和需求不一致，因此这里暂时不要采用Git克隆的方式下载代码，直接下载ZIP包到本地，然后先替换所有的包名和项目名，再使用IDEA打开项目</li>
</ul>
<h3 id="包名全局替换"><a href="#包名全局替换" class="headerlink" title="包名全局替换"></a>包名全局替换</h3><ul>
<li>从官方下载的代码中所有包名都为com.rouyi，且数据库连接信息需要修改，此时，可以借助若依框架修改器来一键修改</li>
<li>参考链接：<a target="_blank" rel="noopener" href="https://gitee.com/lpf_project/RuoYi-MT/releases">https://gitee.com/lpf_project/RuoYi-MT/releases</a></li>
<li>具体修改如下图所示：</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/e864dceb-a6c1-40f8-89c5-c25e3b09ad5e.png" alt="e864dceb-a6c1-40f8-89c5-c25e3b09ad5e"></p>
<blockquote>
<p>如果执行时出现拒绝访问的错误，那就把下载的压缩包放到桌面再执行</p>
</blockquote>
<h3 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h3><p>修改完毕后会生成一个名称为一串数字的文件夹，文件夹内部的zzyl就是替换后的正确项目</p>
<p>在IDEA中打开项目后，还需要进行以下操作：</p>
<ol>
<li>在父工程pom文件中修改JDK版本：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;java.version&gt;1.8&lt;/java.version&gt; 原JDK版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>打开<code>Project Structure</code>，将SDK设置为11</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_16-46-20.png" alt="Snipaste_2025-08-29_16-46-20"></p>
<ol start="3">
<li>在setting中找到Compiler &gt; Java Compiler，查看版本是否为11</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_16-47-37.png" alt="Snipaste_2025-08-29_16-47-37"></p>
<ol start="4">
<li>在setting中找到<code>Maven &gt; Runner</code>，检查JRE版本是否为11</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_16-48-01.png" alt="Snipaste_2025-08-29_16-48-01"></p>
<ol start="5">
<li>在setting中找到<code>File Encodings</code>，确保项目编码为<code>UTF-8</code></li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_16-52-25.png" alt="Snipaste_2025-08-29_16-52-25"></p>
<ol start="6">
<li><p>配置MySQL数据库连接的设置，配置文件的位置在<code>zzyl-admin &gt; src &gt; main &gt; resource &gt; application-druid.yml</code></p>
</li>
<li><p>配置Redis数据库连接的设置，配置文件的位置在<code>zzyl-admin &gt; src &gt; main &gt; resource &gt; application.yml</code></p>
</li>
<li><p>执行sql目录下的ry_xxxx.sql，建议在文件开头加上<code>create database zzyl;</code>先创建数据库，数据导入完成后如图所示：</p>
</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_17-20-44.png" alt="Snipaste_2025-08-29_17-20-44"></p>
<ol start="9">
<li>启动项目的引导类在<code>zzyl-admin</code>中，右键<code>RuoYiApplication</code>启动项目</li>
</ol>
<h3 id="后端项目上传到Gitee"><a href="#后端项目上传到Gitee" class="headerlink" title="后端项目上传到Gitee"></a>后端项目上传到Gitee</h3><p>项目运行起来后，要将代码托管到gitee仓库中，方便维护</p>
<p>先将当前的master分支上传到gitee，然后在master分支上创建一个develop分支；将来，每一章的业务开发都要在develop分支上创建出一个子分支，子分支的命名规则为：dev+章数</p>
<p>每一章的代码在子分支测试完毕后，要合并到develop分支，下一章再从develop分支创建出一个新的分支。</p>
<h2 id="运行前端项目"><a href="#运行前端项目" class="headerlink" title="运行前端项目"></a>运行前端项目</h2><p>在运行后端项目这一章，下载的项目文件中（<code>zzyl-ui</code>）就包含了前端代码，但是这里的前端代码是基于Vue2的，而当前项目需要基于Vue3进行开发</p>
<p>官方地址：<a target="_blank" rel="noopener" href="https://github.com/yangzongzhuan/RuoYi-Vue3">RuoYi-Vue3: :tada: (RuoYi)</a>，访问链接下载基于Vue3框架的前端代码</p>
<p>现在完成后，进入项目中，执行<code>npm install</code>安装所需依赖</p>
<p>访问<code>vite.config.js</code>查看前端项目的配置，其中包含启动端口、访问后端路径等</p>
<h3 id="将前端项目上传到gitee"><a href="#将前端项目上传到gitee" class="headerlink" title="将前端项目上传到gitee"></a>将前端项目上传到gitee</h3><p>项目运行起来后，要将代码托管到gitee仓库中，方便维护</p>
<p>先将当前的master分支上传到gitee，然后在master分支上创建一个develop分支；将来，每一章的业务开发都要在develop分支上创建出一个子分支，子分支的命名规则为：dev+章数</p>
<p>每一章的代码在子分支测试完毕后，要合并到develop分支，下一章再从develop分支创建出一个新的分支</p>
<h2 id="前后端项目结构"><a href="#前后端项目结构" class="headerlink" title="前后端项目结构"></a>前后端项目结构</h2><h3 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h3><h4 id="代码结构"><a href="#代码结构" class="headerlink" title="代码结构"></a>代码结构</h4><p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_18-23-49.png" alt="Snipaste_2025-08-29_18-23-49"></p>
<p>以上是后端代码结构，官方文档的介绍：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">com.ruoyi </span><br><span class="line">├── ruoyi-admin       // 后台服务   存放 controller    </span><br><span class="line">├── common            // 工具类</span><br><span class="line">│       └── annotation                    // 自定义注解</span><br><span class="line">│       └── config                        // 全局配置</span><br><span class="line">│       └── constant                      // 通用常量</span><br><span class="line">│       └── core                          // 核心控制</span><br><span class="line">│       └── enums                         // 通用枚举</span><br><span class="line">│       └── exception                     // 通用异常</span><br><span class="line">│       └── filter                        // 过滤器处理</span><br><span class="line">│       └── utils                         // 通用类处理</span><br><span class="line">├── framework         // 框架核心</span><br><span class="line">│       └── aspectj                       // 注解实现</span><br><span class="line">│       └── config                        // 系统配置</span><br><span class="line">│       └── datasource                    // 数据权限</span><br><span class="line">│       └── interceptor                   // 拦截器</span><br><span class="line">│       └── manager                       // 异步处理</span><br><span class="line">│       └── security                      // 权限控制</span><br><span class="line">│       └── web                           // 前端控制</span><br><span class="line">├── ruoyi-generator   // 代码生成（可移除）</span><br><span class="line">├── ruoyi-quartz      // 定时任务（可移除）</span><br><span class="line">├── ruoyi-system      // 系统代码   存放 domain，mapper，service</span><br><span class="line">├── ruoyi-xxxxxx      // 其他模块</span><br></pre></td></tr></table></figure>

<p>模块之间的依赖关系：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B61.png" alt="若依框架1"></p>
<h4 id="项目中的配置"><a href="#项目中的配置" class="headerlink" title="项目中的配置"></a>项目中的配置</h4><p>项目中的配置文件都在ruoyi-admin模块下，如下图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_18-34-45.png" alt="Snipaste_2025-08-29_18-34-45"></p>
<ul>
<li><strong>i18n</strong>：国际化处理</li>
<li><strong>META-INF</strong>：存储了项目的元信息（描述数据的数据），无需修改</li>
<li><strong>mybatis</strong>：mybatis相关的配置信息</li>
<li><strong>application.yml</strong>：项目中的核心配置</li>
<li><strong>application-druid.yml</strong>：数据库连接的配置</li>
<li><strong>banner.txt</strong>：默认的banner图标信息，项目启动，控制台打印显示</li>
<li><strong>logback.xml</strong>：日志配置</li>
</ul>
<p>最主要的两个配置文件：<code>application.yml</code>和<code>application-druid.yml</code></p>
<h4 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h4><p>若依中默认提供了19张表，可以先简单熟悉一下每个表代表的含义：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_21-57-53.png" alt="Snipaste_2025-08-29_21-57-53"></p>
<h3 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h3><h4 id="代码结构-1"><a href="#代码结构-1" class="headerlink" title="代码结构"></a>代码结构</h4><p><img src="/img/loading.gif" data-original="/img/assests/62210dbb-ca95-4817-806f-e179f043392b.png" alt="62210dbb-ca95-4817-806f-e179f043392b"></p>
<p>详细目录或文件说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">├── bin                        // 执行脚本</span><br><span class="line">├── public                     // 公共文件</span><br><span class="line">│   ├── favicon.ico            // favicon图标</span><br><span class="line">├── src                        // 源代码</span><br><span class="line">│   ├── api                    // 所有请求,后台的api接口，开发时经常操作的目录</span><br><span class="line">│   ├── assets                 // 主题 字体等静态资源</span><br><span class="line">│   ├── components             // 全局公用组件</span><br><span class="line">│   ├── directive              // 全局指令</span><br><span class="line">│   ├── layout                 // 布局</span><br><span class="line">│   ├── plugins                // 通用方法</span><br><span class="line">│   ├── router                 // 路由</span><br><span class="line">│   ├── store                  // 全局 store管理</span><br><span class="line">│   ├── utils                  // 全局公用方法</span><br><span class="line">│   ├── views                  // view，存储vue组件，开发时经常操作的目录</span><br><span class="line">│   ├── App.vue                // 根组件</span><br><span class="line">│   ├── main.js                // 入口 加载组件 初始化等</span><br><span class="line">│   ├── permission.js          // 权限管理</span><br><span class="line">│   └── settings.js            // 系统配置</span><br><span class="line">├── vite                       // 前端构建工具</span><br><span class="line">├── .env.development           // 开发环境配置</span><br><span class="line">├── .env.production            // 生产环境配置</span><br><span class="line">├── .env.staging               // 测试环境配置</span><br><span class="line">├── .gitignore                 // git 忽略项</span><br><span class="line">├── LICENSE                    // 许可证</span><br><span class="line">├── package-lock.json          // 锁定项目依赖的具体版本号</span><br><span class="line">├── package.json               // 配置项目的信息、名称、版本号、描述信息等</span><br><span class="line">├── pnpm-lock.yaml             // 锁定项目依赖的具体版本号</span><br><span class="line">└── vite.config.js             // 用于配置 Vue.js 项目的全局选项，可修改后台访问接口的路径</span><br></pre></td></tr></table></figure>



<h4 id="核心配置"><a href="#核心配置" class="headerlink" title="核心配置"></a>核心配置</h4><p>在开发阶段，配置的修改是较少的，主要关于一个配置文件即可—&gt;vite.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> createVitePlugins <span class="keyword">from</span> <span class="string">&#x27;./vite/plugins&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&#x27;http://localhost:8080&#x27;</span> <span class="comment">// 后端接口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>())</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="variable constant_">VITE_APP_ENV</span> &#125; = env</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 部署生产环境和开发环境下的URL。</span></span><br><span class="line">    <span class="comment">// 默认情况下，vite 会假设你的应用是被部署在一个域名的根路径上</span></span><br><span class="line">    <span class="comment">// 例如 https://www.ruoyi.vip/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.ruoyi.vip/admin/，则设置 baseUrl 为 /admin/。</span></span><br><span class="line">    <span class="attr">base</span>: <span class="variable constant_">VITE_APP_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;/&#x27;</span> : <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">plugins</span>: <span class="title function_">createVitePlugins</span>(env, command === <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">      <span class="comment">// https://cn.vitejs.dev/config/#resolve-alias</span></span><br><span class="line">      <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="comment">// 设置路径</span></span><br><span class="line">        <span class="string">&#x27;~&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./&#x27;</span>),</span><br><span class="line">        <span class="comment">// 设置别名</span></span><br><span class="line">        <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// https://cn.vitejs.dev/config/#resolve-extensions</span></span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&#x27;.mjs&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 打包配置</span></span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">      <span class="comment">// https://vite.dev/config/build-options.html</span></span><br><span class="line">      <span class="attr">sourcemap</span>: command === <span class="string">&#x27;build&#x27;</span> ? <span class="literal">false</span> : <span class="string">&#x27;inline&#x27;</span>,</span><br><span class="line">      <span class="attr">outDir</span>: <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">      <span class="attr">assetsDir</span>: <span class="string">&#x27;assets&#x27;</span>,</span><br><span class="line">      <span class="attr">chunkSizeWarningLimit</span>: <span class="number">2000</span>,</span><br><span class="line">      <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">        <span class="attr">output</span>: &#123;</span><br><span class="line">          <span class="attr">chunkFileNames</span>: <span class="string">&#x27;static/js/[name]-[hash].js&#x27;</span>,</span><br><span class="line">          <span class="attr">entryFileNames</span>: <span class="string">&#x27;static/js/[name]-[hash].js&#x27;</span>,</span><br><span class="line">          <span class="attr">assetFileNames</span>: <span class="string">&#x27;static/[ext]/[name]-[hash].[ext]&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// vite 相关配置</span></span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">      <span class="attr">port</span>: <span class="number">80</span>,</span><br><span class="line">      <span class="attr">host</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">proxy</span>: &#123;</span><br><span class="line">        <span class="comment">// https://cn.vitejs.dev/config/#server-proxy</span></span><br><span class="line">        <span class="string">&#x27;/dev-api&#x27;</span>: &#123;</span><br><span class="line">          <span class="attr">target</span>: baseUrl,</span><br><span class="line">          <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">rewrite</span>: <span class="function">(<span class="params">p</span>) =&gt;</span> p.<span class="title function_">replace</span>(<span class="regexp">/^\/dev-api/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">         <span class="comment">// springdoc proxy</span></span><br><span class="line">         <span class="string">&#x27;^/v3/api-docs/(.*)&#x27;</span>: &#123;</span><br><span class="line">          <span class="attr">target</span>: baseUrl,</span><br><span class="line">          <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">      <span class="attr">postcss</span>: &#123;</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">postcssPlugin</span>: <span class="string">&#x27;internal:charset-removal&#x27;</span>,</span><br><span class="line">            <span class="title class_">AtRule</span>: &#123;</span><br><span class="line">              <span class="attr">charset</span>: <span class="function">(<span class="params">atRule</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (atRule.<span class="property">name</span> === <span class="string">&#x27;charset&#x27;</span>) &#123;</span><br><span class="line">                  atRule.<span class="title function_">remove</span>()</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="功能快速开发"><a href="#功能快速开发" class="headerlink" title="功能快速开发"></a>功能快速开发</h2><p>若依提供的代码生成功能，可以基于表结构快速生成前后端的代码</p>
<h3 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h3><p>以中州养老项目为例，首先开发护理项目模块，先要准备两部分内容：一个是一级菜单，另一个是表结构</p>
<h4 id="菜单"><a href="#菜单" class="headerlink" title="菜单"></a>菜单</h4><p>对于护理模块而言，前端展示中是一个子菜单，需要先在若依项目中创建一个服务管理的一级菜单，方便对服务管理下的功能<strong>进行分类</strong></p>
<p>最终效果如下所示：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/15c90c8f-1670-4ef3-b0eb-89442e0fc7dd.png" alt="15c90c8f-1670-4ef3-b0eb-89442e0fc7dd"></p>
<p>详细配置，如下图所示：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/19242942-fa47-4b68-ba23-09bb256a3dc8.png" alt="19242942-fa47-4b68-ba23-09bb256a3dc8"></p>
<p>点击确定后，刷新页面，可以看到多了一个服务管理的一级菜单</p>
<h4 id="表结构-1"><a href="#表结构-1" class="headerlink" title="表结构"></a>表结构</h4><p>护理项目表结构定义如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `nursing_project` (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">100</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;名称&#x27;</span>,</span><br><span class="line">  `order_no` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;排序号&#x27;</span>,</span><br><span class="line">  `unit` <span class="type">varchar</span>(<span class="number">50</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;单位&#x27;</span>,</span><br><span class="line">  `price` <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;价格&#x27;</span>,</span><br><span class="line">  `image` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;图片&#x27;</span>,</span><br><span class="line">  `nursing_requirement` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;护理要求&#x27;</span>,</span><br><span class="line">  `status` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;状态（0：禁用，1：启用）&#x27;</span>,</span><br><span class="line">  `create_by` <span class="type">varchar</span>(<span class="number">50</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建人&#x27;</span>,</span><br><span class="line">  `update_by` <span class="type">varchar</span>(<span class="number">50</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新人&#x27;</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;备注&#x27;</span>,</span><br><span class="line">  `create_time` datetime <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `name` (`name`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">84</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci ROW_FORMAT<span class="operator">=</span><span class="keyword">DYNAMIC</span> COMMENT<span class="operator">=</span><span class="string">&#x27;护理项目表&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h3 id="代码生成"><a href="#代码生成" class="headerlink" title="代码生成"></a>代码生成</h3><p>左侧菜单中找到<code>系统工具&gt;代码生成</code>，然后点击导入：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/702c2c81-dab4-43b5-80b1-699f26066123.png" alt="702c2c81-dab4-43b5-80b1-699f26066123"></p>
<p>选中<strong>nursing_project</strong>表结构，点击确定：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/1696c79e-6a84-4d61-ba1c-5b776ce0a5db.png" alt="1696c79e-6a84-4d61-ba1c-5b776ce0a5db"></p>
<p>在代码生成列表中，可以看到新增了一条数据</p>
<p><img src="/img/loading.gif" data-original="/img/assests/4211847e-a19e-441c-bafe-26ae750bf35c.png" alt="4211847e-a19e-441c-bafe-26ae750bf35c"></p>
<blockquote>
<p>该数据对应了5个按钮</p>
<ul>
<li>预览生成后的代码</li>
<li>修改代码生成的配置（常用）</li>
<li>删除这条数据</li>
<li>同步表结构（导入之后改动表的情况）</li>
<li>下载离线代码包</li>
</ul>
</blockquote>
<p>在生成之前，咱们需要对代码生成做一些配置，咱们可以点击**<font color='red'>修改生成配置</font>**按钮，可以看到有三部分的配置</p>
<ul>
<li>基本信息</li>
<li>字段信息</li>
<li>生成信息</li>
</ul>
<p>下图是<strong>基本信息，</strong>可以根据自己的需求修改：表、实体、表描述、作者相关的数据</p>
<p><img src="/img/loading.gif" data-original="/img/assests/1afccf6a-8843-4f0f-900d-cfd95a81f142.png" alt="1afccf6a-8843-4f0f-900d-cfd95a81f142"></p>
<p>下图是<strong>字段信息</strong>，一定要<strong>根据页面原型</strong>进行修改：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-29_23-14-06.png" alt="Snipaste_2025-08-29_23-14-06"></p>
<p>关于每个字段所表示的意思，如下表所示：</p>
<table>
<thead>
<tr>
<th>字段信息</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>字段列名</td>
<td>表中的字段列名称</td>
</tr>
<tr>
<td>字段描述</td>
<td>字段的描述，自动读取建表语句中的comment信息，可根据实际情况更改</td>
</tr>
<tr>
<td>物理类型</td>
<td>数据库所对应的字段类型</td>
</tr>
<tr>
<td>Java类型</td>
<td>Java实体类中属性的类型，可改，例如，状态字段：Long类型可以修改为Integer</td>
</tr>
<tr>
<td>Java属性</td>
<td>Java实体类中所对应的属性名称</td>
</tr>
<tr>
<td><strong>插入</strong></td>
<td>新增的时候，需要插入的字段</td>
</tr>
<tr>
<td><strong>编辑</strong></td>
<td>修改的时候，需要插入的字段</td>
</tr>
<tr>
<td><strong>列表</strong></td>
<td>列表查询需要展示的字段</td>
</tr>
<tr>
<td><strong>查询</strong></td>
<td>列表查询，需要的条件字段</td>
</tr>
<tr>
<td><strong>查询方式</strong></td>
<td>与上面查询条件配合，选择对应的查询方式</td>
</tr>
<tr>
<td><strong>必填</strong></td>
<td>在插入和新增的时候，这个字段是否是必填项，可生成校验</td>
</tr>
<tr>
<td>显示类型</td>
<td>前端代码使用的组件类型，可根据实际情况选择</td>
</tr>
<tr>
<td>字典类型</td>
<td>字典管理是用来维护可枚举的数据的，如下拉框、单选按钮等，支持自定义</td>
</tr>
</tbody></table>
<p>下图是<strong>生成信息，</strong>可以按照自己的实际情况，来修改包路径，模块名称，上级菜单</p>
<p><img src="/img/loading.gif" data-original="/img/assests/3456d2b4-dfc1-42d4-a42a-9484ccf5fe98.png" alt="3456d2b4-dfc1-42d4-a42a-9484ccf5fe98"></p>
<p>修改完毕后，回到了列表页，这个时候就可以点击<strong>下载</strong>按钮，去下载代码包</p>
<p>下载后的代码包，解压后，包含了三部分，如下图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/4bc7f73f-86e8-4cda-85ea-6aca4cd629db.png" alt="4bc7f73f-86e8-4cda-85ea-6aca4cd629db"></p>
<p>添加新功能的步骤如下所示：</p>
<ol>
<li><p>执行projectMenu.sql文件中的内容，内容为菜单的数据</p>
</li>
<li><p>把main目录拷贝后，找到后端ruoyi-admin模块，在<strong>main目录上点右键</strong>，选择Paste进行拷贝，效果如下：</p>
</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/0636a303-007e-4f63-adad-d6d587b6d3be.png" alt="0636a303-007e-4f63-adad-d6d587b6d3be"></p>
<ol start="3">
<li>将vue目录下的api和view拷贝到项目中，效果如下：</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/8833bfb1-6967-41a9-a63e-66b92e17fe5d.png" alt="8833bfb1-6967-41a9-a63e-66b92e17fe5d"></p>
<ol start="4">
<li>等代码拷贝完成后，重新启动前后端项目，打开页面，可以在<strong>服务管理</strong>中看到子菜单<strong>护理项目</strong>，如下图：</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/93e17237-e0f0-43ea-8c7f-eaa2716a7d6d.png" alt="93e17237-e0f0-43ea-8c7f-eaa2716a7d6d"></p>
<blockquote>
<p>可以对护理项目进行一些操作，比如，新增、修改、删除、查询等</p>
</blockquote>
<h3 id="代码阅读"><a href="#代码阅读" class="headerlink" title="代码阅读"></a>代码阅读</h3><h4 id="后端代码-1"><a href="#后端代码-1" class="headerlink" title="后端代码"></a>后端代码</h4><p>后端代码中，若依生成的也是三层架构，且Controller层是基于Restful风格的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/nursing/project&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NursingProjectController</span> <span class="keyword">extends</span> <span class="title class_">BaseController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> INursingProjectService nursingProjectService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:list&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> TableDataInfo <span class="title function_">list</span><span class="params">(NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        startPage();</span><br><span class="line">        List&lt;NursingProject&gt; list = nursingProjectService.selectNursingProjectList(nursingProject);</span><br><span class="line">        <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出护理项目列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:export&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;护理项目&quot;, businessType = BusinessType.EXPORT)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/export&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">export</span><span class="params">(HttpServletResponse response, NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;NursingProject&gt; list = nursingProjectService.selectNursingProjectList(nursingProject);</span><br><span class="line">        ExcelUtil&lt;NursingProject&gt; util = <span class="keyword">new</span> <span class="title class_">ExcelUtil</span>&lt;NursingProject&gt;(NursingProject.class);</span><br><span class="line">        util.exportExcel(response, list, <span class="string">&quot;护理项目数据&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取护理项目详细信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:query&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">getInfo</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> success(nursingProjectService.selectNursingProjectById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:add&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;护理项目&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax(nursingProjectService.insertNursingProject(nursingProject));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:edit&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;护理项目&quot;, businessType = BusinessType.UPDATE)</span></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">edit</span><span class="params">(<span class="meta">@RequestBody</span> NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax(nursingProjectService.updateNursingProject(nursingProject));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;nursing:project:remove&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;护理项目&quot;, businessType = BusinessType.DELETE)</span></span><br><span class="line">	<span class="meta">@DeleteMapping(&quot;/&#123;ids&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">remove</span><span class="params">(<span class="meta">@PathVariable</span> Long[] ids)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax(nursingProjectService.deleteNursingProjectByIds(ids));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当有具体返回值时，返回的时</p>
</blockquote>
<p>主要关注的是分页操作，在传统的分页操作中，前端发送查询请求，后端用实体类接收，并在Service层对其进行<strong>先分页、后查询</strong>的操作</p>
<p>而若依框架选择的是：</p>
<ol>
<li>将所有的分页操作封装到一个方法中<code>startPage()</code></li>
<li>该方法又调用了<code>PageUtils.startPage()</code></li>
<li>在<code>PageUtils.startPage()</code>方法内<ol>
<li>先获取了请求参数中的分页参数</li>
<li>然后调用PageHelper的<code>startPage()</code></li>
<li>PageHelper会对下一个SQL语句进行拦截，然后将SQL语句添加上分页条件</li>
</ol>
</li>
</ol>
<p>总的来说，若依框架选择的是将分页操作从Service层中抽离出来进行单独处理，而Service层只处理业务相关操作</p>
<h4 id="前端代码-1"><a href="#前端代码-1" class="headerlink" title="前端代码"></a>前端代码</h4><p><strong>前端路由</strong>：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/0f1fc68f-8d1c-4afd-88aa-2f5c3b6d126c.png" alt="0f1fc68f-8d1c-4afd-88aa-2f5c3b6d126c"></p>
<ul>
<li>这个菜单的类型为<strong>菜单，</strong>菜单需要有对应的<strong>组件路径</strong></li>
<li><code>父菜单的路由地址+当前菜单的路由地址</code> 就可以访问组件路径对应的组件<ul>
<li>即： <code>nursing/project</code>加载组件@&#x2F;views&#x2F;nursing&#x2F;project&#x2F;index.vue</li>
</ul>
</li>
</ul>
<p><strong>测试案例：</strong></p>
<p>在服务管理中新增一个菜单(护理安排)，配置如下:</p>
<ul>
<li>路由地址：arrange</li>
<li>组件路径：nursing&#x2F;arrange&#x2F;index</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/cfcced22-5cfd-4c8c-aa1c-29b724b89335.png" alt="cfcced22-5cfd-4c8c-aa1c-29b724b89335"></p>
<p>在@&#x2F;views&#x2F;nursing&#x2F;arrange目录中新增一个index.vue组件：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/95b023ac-1ad4-464e-b1b5-a2d502bdc5c5.png" alt="95b023ac-1ad4-464e-b1b5-a2d502bdc5c5"></p>
<p>测试是否能正常访问这个组件：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/316728e8-c03c-413e-8b8e-c152fb7ada6d.png" alt="316728e8-c03c-413e-8b8e-c152fb7ada6d"></p>
<h3 id="代码迁移"><a href="#代码迁移" class="headerlink" title="代码迁移"></a>代码迁移</h3><p>在前面的功能快速开发章节中，咱们是将若依生成的功能代码直接放到了<code>zzyl-admin</code>模块中，将来，咱们的业务功能代码会越来越多，如果都放到<code>zzyl-admin</code>模块中，会让<code>zzyl-admin</code>模块显得比较乱。所以，咱们最好创建一个新模块，然后将功能模块的代码统一都放到新模块中。以下是具体的操作思路：</p>
<p>参考链接（在若依项目中创建新模块）：<a target="_blank" rel="noopener" href="https://doc.ruoyi.vip/ruoyi/document/htsc.html#%E6%96%B0%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97">后台手册 | RuoYi</a></p>
<p>要求：</p>
<ul>
<li>创建<strong>zzyl-nursing-platform</strong>模块，效果如下：</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/7c2df292-b04c-4753-a565-303711efadec.png" alt="7c2df292-b04c-4753-a565-303711efadec"></p>
<ul>
<li>在<strong>父模块</strong>中管理zzyl-nursing-platform模块的版本：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 业务模块--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-nursing-platform<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;zzyl.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在<strong>zzyl-nursing-platform</strong>模块中引入zzyl-common模块</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在<strong>zzyl-admin</strong>模块中引入新创建的zzyl-nursing-platform模块</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 护理业务模块--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-nursing-platform<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>把<strong>护理项目</strong>相关的代码，都移动到新模块中  zzyl-nursing-platform<ul>
<li>统一修改包名为<code>com.zzyl.nursing</code></li>
</ul>
</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/5d615370-e366-4ca7-be2b-140d0a36b1ac.png" alt="5d615370-e366-4ca7-be2b-140d0a36b1ac"></p>
<p>修改完成后，重启后端程序，完成测试</p>
<h1 id="代码模板改造"><a href="#代码模板改造" class="headerlink" title="代码模板改造"></a>代码模板改造</h1><ul>
<li>为了能够更好地通过Swagger进行接口测试，手动修改了若依生成的Controller层代码和实体类代码，加上了Swagger相关注解，未来还要让若依生成很多页面，难道每个页面都需要手动修改Controller和实体类吗？</li>
<li>若依生成的实体类中书写了大量的getter、setter、toString方法，看上去特别不优雅，能不能在若依直接生成使用Lombok注解的实体类？</li>
<li>若依生成的Mapper层代码采用的是MyBatis框架，能不能改造成它的好搭档MyBatisPlus呢？</li>
<li>若依生成的代码中日期时间都是通过传统的<code>Date</code>类来处理的，能不能改造成更好用的<code>LocalDateTime</code>呢？</li>
</ul>
<p>最终期望改造后的效果如下：</p>
<ul>
<li>支持自动添加Swagger的注解</li>
<li>支持Lombok</li>
<li>支持MyBatisPlus</li>
<li>支持LocalDateTime</li>
</ul>
<p>在若依框架中，生成代码的模块是zzyl-generator模块：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/05c36fa3-5aa6-4c86-9e7b-66cae7b4da0a.png" alt="05c36fa3-5aa6-4c86-9e7b-66cae7b4da0a"></p>
<p>若依的代码生成模块背后采用的是Velocity模板引擎</p>
<p>上述代码中，以<code>vm</code>为后缀的文件，都是velocity模板引擎的对应的模板文件，如果想要改造代码生成的内容，咱们必须要先学习velocity，而后再回来看懂这些代码，才能支撑咱们去改造这些模板文件，来生成咱们想要的内容</p>
<h2 id="Velocity模板引擎"><a href="#Velocity模板引擎" class="headerlink" title="Velocity模板引擎"></a>Velocity模板引擎</h2><p>Velocity是一个基于Java的模板引擎，它可以通过特定的语法获取java对象的数据 , 填充到模板中，从而实现界面和java代码的分离</p>
<p><img src="/img/loading.gif" data-original="/img/assests/%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B62.png" alt="若依框架2.png"></p>
<p>常见的应用场景：</p>
<ul>
<li>Web应用程序 : 作为应用程序的视图, 展示数据</li>
<li><strong>源代码生成</strong>  : Velocity可以基于模板生成Java源代码</li>
<li>自动电子邮件 : 网站注册， 认证等的电子邮件模板</li>
<li>网页静态化  : 基于velocity模板生成静态网页</li>
</ul>
<h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><ul>
<li>需求：根据下面html模板，完成对数据的填充</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>velocity快速入门<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>心怀梦想，坚持不懈，成功即在前方。加油少年！<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>要求：<strong>加油少年，</strong>这几个字，需要使用模板引擎动态填充进来</li>
</ul>
<p><strong>入门案例实现步骤</strong></p>
<ol>
<li>准备模板</li>
</ol>
<p>拷贝一份上面提供的html文档到若依项目中的ruoyi-generator模块下的reources目录中</p>
<p>模板文件命名：<code>index.html.vm</code></p>
<p>如下图</p>
<p><img src="/img/loading.gif" data-original="/img/assests/95b1b651-b983-4cd3-9758-190142ad8a1e.png" alt="95b1b651-b983-4cd3-9758-190142ad8a1e"></p>
<p>模板文件内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>velocity快速入门<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>心怀梦想，坚持不懈，成功即在前方。$&#123;message&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong>：上述代码中的 加油少年  修改为了  ${message}  这是一个动态变量，方便<strong>动态</strong>填充数据</p>
</blockquote>
<ol start="2">
<li>编写java代码实现数据填充，并生成文件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zzyl.common.constant.Constants;</span><br><span class="line"><span class="keyword">import</span> org.apache.velocity.Template;</span><br><span class="line"><span class="keyword">import</span> org.apache.velocity.VelocityContext;</span><br><span class="line"><span class="keyword">import</span> org.apache.velocity.app.Velocity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VelocityDemoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">// velocity资源加载器，告诉模板引擎到类路径下寻找资源（比如模板）</span></span><br><span class="line">        p.setProperty(<span class="string">&quot;resource.loader.file.class&quot;</span>, <span class="string">&quot;org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义字符集</span></span><br><span class="line">        p.setProperty(Velocity.INPUT_ENCODING, Constants.UTF8);</span><br><span class="line">        <span class="comment">// 初始化velocity引擎</span></span><br><span class="line">        Velocity.init(p);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建velocity上下文对象</span></span><br><span class="line">        <span class="type">VelocityContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VelocityContext</span>();</span><br><span class="line">        <span class="comment">// 数据模型，这里的key需要跟模板中的变量对应上，不然填充不了数据</span></span><br><span class="line">        context.put(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;加油朋友！！！&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取模板</span></span><br><span class="line">        <span class="type">Template</span> <span class="variable">template</span> <span class="operator">=</span> Velocity.getTemplate(<span class="string">&quot;vms/index.html.vm&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 输出</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fileWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;zzyl-generator\\src\\main\\resources\\index.html&quot;</span>);</span><br><span class="line">        <span class="comment">// 合并模板和数据模型</span></span><br><span class="line">        template.merge(context, fileWriter);</span><br><span class="line">        <span class="comment">// 关闭流</span></span><br><span class="line">        fileWriter.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="AI辅助解读Velocity语法"><a href="#AI辅助解读Velocity语法" class="headerlink" title="AI辅助解读Velocity语法"></a>AI辅助解读Velocity语法</h3><p>找一个有代表性的模板文件来解读一下，比如：domain.java.vm</p>
<p>提示词：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">帮我给这个文件的所有代码都添加注释，重点对velocity语法做一些特别的说明</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Velocity模板开始，定义包名</span></span><br><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.domain;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环导入所需的类库</span></span><br><span class="line">#foreach ($<span class="keyword">import</span> in $importList)</span><br><span class="line"><span class="keyword">import</span> $&#123;<span class="keyword">import</span>&#125;;</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入其他必要的类库</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringStyle;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.annotation.Excel;</span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.BaseEntity;</span><br><span class="line">#elseif($table.tree)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.TreeEntity;</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;对象 $&#123;tableName&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line">#set($Entity=<span class="string">&quot;BaseEntity&quot;</span>)</span><br><span class="line">#elseif($table.tree)</span><br><span class="line">#set($Entity=<span class="string">&quot;TreeEntity&quot;</span>)</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义Java类，继承自BaseEntity或TreeEntity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;ClassName&#125; <span class="keyword">extends</span> <span class="title class_">$</span>&#123;Entity&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 序列化版本ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 循环定义类中的属性</span></span><br><span class="line">    #foreach ($column in $columns)</span><br><span class="line">    #<span class="keyword">if</span>(!$table.isSuperColumn($column.javaField))</span><br><span class="line">        <span class="comment">// 添加属性的注释</span></span><br><span class="line">        <span class="comment">/** $column.columnComment */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据属性是否为列表类型，决定是否添加Excel注解</span></span><br><span class="line">        #<span class="keyword">if</span>($column.list)</span><br><span class="line">        #set($parentheseIndex=$column.columnComment.indexOf(<span class="string">&quot;（&quot;</span>))</span><br><span class="line">        #<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">        #set($comment=$column.columnComment.substring(<span class="number">0</span>, $parentheseIndex))</span><br><span class="line">        #<span class="keyword">else</span></span><br><span class="line">        #set($comment=$column.columnComment)</span><br><span class="line">        #end</span><br><span class="line">        #<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">        <span class="comment">// 如果属性名中有括号，则截取括号前的内容作为Excel注解的名字</span></span><br><span class="line">        <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, readConverterExp = &quot;$column.readConverterExp()&quot;)</span></span><br><span class="line">        #<span class="keyword">else</span></span><br><span class="line">        <span class="comment">// 如果是日期类型，添加JSON格式化注解</span></span><br><span class="line">        #elseif($column.javaType == <span class="string">&#x27;Date&#x27;</span>)</span><br><span class="line">        <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">        <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, width = 30, dateFormat = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">        #<span class="keyword">else</span></span><br><span class="line">        <span class="comment">// 其他情况直接添加Excel注解</span></span><br><span class="line">        <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;)</span></span><br><span class="line">        #end</span><br><span class="line">        #end</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义属性</span></span><br><span class="line">        <span class="keyword">private</span> $column.javaType $column.javaField;</span><br><span class="line"></span><br><span class="line">    #end</span><br><span class="line">    #end</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是子表，添加子表的集合属性</span></span><br><span class="line">    #<span class="keyword">if</span>($table.sub)</span><br><span class="line">        <span class="comment">/** $table.subTable.functionName信息 */</span></span><br><span class="line">        <span class="keyword">private</span> List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List;</span><br><span class="line"></span><br><span class="line">    #end</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成getter和setter方法</span></span><br><span class="line">    #foreach ($column in $columns)</span><br><span class="line">    #<span class="keyword">if</span>(!$table.isSuperColumn($column.javaField))</span><br><span class="line">        #<span class="keyword">if</span>($column.javaField.length() &gt; <span class="number">2</span> &amp;&amp; $column.javaField.substring(<span class="number">1</span>,<span class="number">2</span>).matches(<span class="string">&quot;[A-Z]&quot;</span>))</span><br><span class="line">        #set($AttrName=$column.javaField)</span><br><span class="line">        #<span class="keyword">else</span></span><br><span class="line">        #set($AttrName=$column.javaField.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + $&#123;column.javaField.substring(<span class="number">1</span>)&#125;)</span><br><span class="line">        #end</span><br><span class="line"></span><br><span class="line">        <span class="comment">// setter方法</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> set$&#123;AttrName&#125;($column.javaType $column.javaField)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">this</span>.$column.javaField = $column.javaField;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// getter方法</span></span><br><span class="line">        <span class="keyword">public</span> $column.javaType get$&#123;AttrName&#125;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> $column.javaField;</span><br><span class="line">        &#125;</span><br><span class="line">    #end</span><br><span class="line">    #end</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是子表，生成子表集合的getter和setter方法</span></span><br><span class="line">    #<span class="keyword">if</span>($table.sub)</span><br><span class="line">        <span class="keyword">public</span> List&lt;$&#123;subClassName&#125;&gt; get$&#123;subClassName&#125;List()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> $&#123;subclassName&#125;List;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> set$&#123;subClassName&#125;List(List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">this</span>.$&#123;subclassName&#125;List = $&#123;subclassName&#125;List;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    #end</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写toString方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ToStringBuilder</span>(<span class="built_in">this</span>,ToStringStyle.MULTI_LINE_STYLE)</span><br><span class="line">        #foreach ($column in $columns)</span><br><span class="line">        #<span class="keyword">if</span>($column.javaField.length() &gt; <span class="number">2</span> &amp;&amp; $column.javaField.substring(<span class="number">1</span>,<span class="number">2</span>).matches(<span class="string">&quot;[A-Z]&quot;</span>))</span><br><span class="line">        #set($AttrName=$column.javaField)</span><br><span class="line">        #<span class="keyword">else</span></span><br><span class="line">        #set($AttrName=$column.javaField.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + $&#123;column.javaField.substring(<span class="number">1</span>)&#125;)</span><br><span class="line">        #end</span><br><span class="line">            .append(<span class="string">&quot;$&#123;column.javaField&#125;&quot;</span>, get$&#123;AttrName&#125;())</span><br><span class="line">        #end</span><br><span class="line">        #<span class="keyword">if</span>($table.sub)</span><br><span class="line">            .append(<span class="string">&quot;$&#123;subclassName&#125;List&quot;</span>, get$&#123;subClassName&#125;List())</span><br><span class="line">        #end</span><br><span class="line">            .toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Velocity语法解释<ul>
<li><code>$&#123;variable&#125;</code>: 表示插入变量值</li>
<li><code>#foreach</code> 和 <code>#end</code>: 循环结构，用于遍历列表</li>
<li><code>#if</code> 和 <code>#end</code>: 条件判断结构</li>
<li><code>#set</code>: 设置变量</li>
<li><code>#elseif</code>: 条件分支</li>
</ul>
</li>
<li>Java类结构说明<ul>
<li>包声明: 定义类所在的包</li>
<li>导入语句: 导入类所需要的类库</li>
<li>类注释: 描述类的功能和作者信息</li>
<li>类定义: 定义类并继承自<code>BaseEntity</code>或<code>TreeEntity</code></li>
<li>属性定义: 根据模板参数定义类的属性</li>
<li>属性注释: 对属性进行描述</li>
<li>Excel注解: 标记属性以方便导出Excel</li>
<li>getter和setter方法: 自动生成属性的访问方法</li>
<li>子表集合: 如果是子表，则定义子表集合</li>
<li>重写toString方法: 提供类实例的字符串表示形式</li>
</ul>
</li>
</ul>
<h3 id="代码生成流程"><a href="#代码生成流程" class="headerlink" title="代码生成流程"></a>代码生成流程</h3><p>阅读一下代码生成功能的核心代码，代码位置：<code>com.zzyl.generator.service.GenTableServiceImpl.generatorCode()</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成代码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tableName 表名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> zip       压缩输出流</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">generatorCode</span><span class="params">(String tableName, ZipOutputStream zip)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 查询表信息</span></span><br><span class="line">    <span class="type">GenTable</span> <span class="variable">table</span> <span class="operator">=</span> genTableMapper.selectGenTableByName(tableName);</span><br><span class="line">    <span class="comment">// 设置主子表信息</span></span><br><span class="line">    setSubTable(table);</span><br><span class="line">    <span class="comment">// 设置主键列信息</span></span><br><span class="line">    setPkColumn(table);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化Velocity引擎</span></span><br><span class="line">    VelocityInitializer.initVelocity();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 准备Velocity上下文   获取该表的详细数据，并设置模板所需要的数据模型</span></span><br><span class="line">    <span class="type">VelocityContext</span> <span class="variable">context</span> <span class="operator">=</span> VelocityUtils.prepareContext(table);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取模板列表   读取resources/vm目录中的定义的模板文件</span></span><br><span class="line">    List&lt;String&gt; templates = VelocityUtils.getTemplateList(table.getTplCategory(), table.getTplWebType());</span><br><span class="line">    <span class="keyword">for</span> (String template : templates)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 渲染模板</span></span><br><span class="line">        <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line">        <span class="type">Template</span> <span class="variable">tpl</span> <span class="operator">=</span> Velocity.getTemplate(template, Constants.UTF8);</span><br><span class="line">        <span class="comment">// 合并模板和数据模型</span></span><br><span class="line">        tpl.merge(context, sw);</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 将渲染结果添加到zip文件</span></span><br><span class="line">            zip.putNextEntry(<span class="keyword">new</span> <span class="title class_">ZipEntry</span>(VelocityUtils.getFileName(template, table)));</span><br><span class="line">            IOUtils.write(sw.toString(), zip, Constants.UTF8);</span><br><span class="line">            IOUtils.closeQuietly(sw);</span><br><span class="line">            zip.flush();</span><br><span class="line">            zip.closeEntry();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 记录日志</span></span><br><span class="line">            log.error(<span class="string">&quot;渲染模板失败，表名：&quot;</span> + table.getTableName(), e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="集成Lombok"><a href="#集成Lombok" class="headerlink" title="集成Lombok"></a>集成Lombok</h2><ol>
<li>在父工程中添加Lombok版本管理</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	    <span class="comment">&lt;!-- 其他依赖省略... --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在zzyl-common模块中引入lombok的依赖（通用，其他模块如需要用，只需要依赖common即可）</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>修改模板</li>
</ol>
<p>主要修改的模板为 <code>domain.java.vm</code>，让它支持<strong>lombok</strong></p>
<p>修改模板如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.domain;</span><br><span class="line"></span><br><span class="line">#foreach ($<span class="keyword">import</span> in $importList)</span><br><span class="line"><span class="keyword">import</span> $&#123;<span class="keyword">import</span>&#125;;</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringBuilder;  ## 用不到了，可删</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringStyle;  ## 用不到了，可删</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.annotation.Excel;</span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.BaseEntity;</span><br><span class="line">#elseif($table.tree)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.TreeEntity;</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> lombok.Data;  ## 导入lombok的依赖</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;对象 $&#123;tableName&#125;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line">#set($Entity=<span class="string">&quot;BaseEntity&quot;</span>)</span><br><span class="line">#elseif($table.tree)</span><br><span class="line">#set($Entity=<span class="string">&quot;TreeEntity&quot;</span>)</span><br><span class="line">#end</span><br><span class="line"><span class="meta">@Data</span>  ## 添加lombok的注解</span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;ClassName&#125; <span class="keyword">extends</span> <span class="title class_">$</span>&#123;Entity&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>(!$table.isSuperColumn($column.javaField))</span><br><span class="line">    <span class="comment">/** $column.columnComment */</span></span><br><span class="line">#<span class="keyword">if</span>($column.list)</span><br><span class="line">#set($parentheseIndex=$column.columnComment.indexOf(<span class="string">&quot;（&quot;</span>))</span><br><span class="line">#<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">#set($comment=$column.columnComment.substring(<span class="number">0</span>, $parentheseIndex))</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#set($comment=$column.columnComment)</span><br><span class="line">#end</span><br><span class="line">#<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, readConverterExp = &quot;$column.readConverterExp()&quot;)</span></span><br><span class="line">#elseif($column.javaType == <span class="string">&#x27;Date&#x27;</span>)</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, width = 30, dateFormat = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;)</span></span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line">    <span class="keyword">private</span> $column.javaType $column.javaField;</span><br><span class="line"></span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="comment">/** $table.subTable.functionName信息 */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List;</span><br><span class="line"></span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">## 以下是生成属性的get/set方法  start....  删除这部分内容</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>(!$table.isSuperColumn($column.javaField))</span><br><span class="line">#<span class="keyword">if</span>($column.javaField.length() &gt; <span class="number">2</span> &amp;&amp; $column.javaField.substring(<span class="number">1</span>,<span class="number">2</span>).matches(<span class="string">&quot;[A-Z]&quot;</span>))</span><br><span class="line">#set($AttrName=$column.javaField)</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#set($AttrName=$column.javaField.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + $&#123;column.javaField.substring(<span class="number">1</span>)&#125;)</span><br><span class="line">#end</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> set$&#123;AttrName&#125;($column.javaType $column.javaField) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.$column.javaField = $column.javaField;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $column.javaType get$&#123;AttrName&#125;() </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> $column.javaField;</span><br><span class="line">    &#125;</span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">## 以下是生成属性的get/set方法  end....  删除这部分内容</span><br><span class="line"></span><br><span class="line">## 如果是主子表，生成子表相关的get/set方法，start....  删除这部分内容</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;subClassName&#125;&gt; get$&#123;subClassName&#125;List()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> $&#123;subclassName&#125;List;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> set$&#123;subClassName&#125;List(List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.$&#123;subclassName&#125;List = $&#123;subclassName&#125;List;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">## 如果是主子表，生成子表相关的get/set方法，end....  删除这部分内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##以下代码生成 toString方法， start....  删除这部分内容</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ToStringBuilder</span>(<span class="built_in">this</span>,ToStringStyle.MULTI_LINE_STYLE)</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>($column.javaField.length() &gt; <span class="number">2</span> &amp;&amp; $column.javaField.substring(<span class="number">1</span>,<span class="number">2</span>).matches(<span class="string">&quot;[A-Z]&quot;</span>))</span><br><span class="line">#set($AttrName=$column.javaField)</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#set($AttrName=$column.javaField.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + $&#123;column.javaField.substring(<span class="number">1</span>)&#125;)</span><br><span class="line">#end</span><br><span class="line">            .append(<span class="string">&quot;$&#123;column.javaField&#125;&quot;</span>, get$&#123;AttrName&#125;())</span><br><span class="line">#end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">            .append(<span class="string">&quot;$&#123;subclassName&#125;List&quot;</span>, get$&#123;subClassName&#125;List())</span><br><span class="line">#end</span><br><span class="line">            .toString();</span><br><span class="line">    &#125;</span><br><span class="line">##以下代码生成 toString方法， end....  删除这部分内容</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="集成MyBatis-Plus"><a href="#集成MyBatis-Plus" class="headerlink" title="集成MyBatis-Plus"></a>集成MyBatis-Plus</h2><p>参考：<a target="_blank" rel="noopener" href="https://gitee.com/tellsea/ruoyi-vue-plus">https://gitee.com/tellsea/ruoyi-vue-plus</a></p>
<ol>
<li>父工程中添加MP版本管理</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-plus-spring-boot.version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">mybatis-plus-spring-boot.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 依赖声明 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MyBatis-Plus 增强CRUD --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus-spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-annotation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus-spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在zzyl-common模块中引入MP的依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MyBatisPlus--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-annotation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修改核心配置</li>
</ol>
<p>在zzyl-admin中修改application.yml，新增MyBatisPlus并<strong>删除原生MyBatis相关配置</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MyBatisPlus配置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># 搜索指定包别名</span></span><br><span class="line">  <span class="attr">typeAliasesPackage:</span> <span class="string">com.zzyl.**.domain</span></span><br><span class="line">  <span class="comment"># 配置mapper的扫描，找到所有的mapper.xml映射文件</span></span><br><span class="line">  <span class="attr">mapperLocations:</span> <span class="string">classpath*:mapper/**/*Mapper.xml</span></span><br><span class="line">  <span class="comment"># 全局配置</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span>   <span class="comment">#id生成策略为自增</span></span><br><span class="line">  <span class="attr">configuration:</span> </span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span>    <span class="comment">#字段与属性，自动转换为驼峰命名</span></span><br></pre></td></tr></table></figure>

<p>新增核心配置类，<strong>删除MyBatisConfig</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.framework.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mybatis Plus 配置</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement(proxyTargetClass = true)</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// 分页插件</span></span><br><span class="line">        interceptor.addInnerInterceptor(paginationInnerInterceptor());</span><br><span class="line">        <span class="comment">// 乐观锁插件</span></span><br><span class="line">        interceptor.addInnerInterceptor(optimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="comment">// 阻断插件</span></span><br><span class="line">        interceptor.addInnerInterceptor(blockAttackInnerInterceptor());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页插件，自动识别数据库类型 https://baomidou.com/guide/interceptor-pagination.html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> PaginationInnerInterceptor <span class="title function_">paginationInnerInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PaginationInnerInterceptor</span> <span class="variable">paginationInnerInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>();</span><br><span class="line">        <span class="comment">// 设置数据库类型为mysql</span></span><br><span class="line">        paginationInnerInterceptor.setDbType(DbType.MYSQL);</span><br><span class="line">        <span class="comment">// 设置最大单页限制数量，默认 500 条，-1 不受限制</span></span><br><span class="line">        paginationInnerInterceptor.setMaxLimit(-<span class="number">1L</span>);</span><br><span class="line">        <span class="keyword">return</span> paginationInnerInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 乐观锁插件 https://baomidou.com/guide/interceptor-optimistic-locker.html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> OptimisticLockerInnerInterceptor <span class="title function_">optimisticLockerInnerInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果是对全表的删除或更新操作，就会终止该操作 https://baomidou.com/guide/interceptor-block-attack.html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> BlockAttackInnerInterceptor <span class="title function_">blockAttackInnerInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BlockAttackInnerInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="改造护理项目代码"><a href="#改造护理项目代码" class="headerlink" title="改造护理项目代码"></a>改造护理项目代码</h3><p>在改造生成模板之前，先手动改造一下护理项目的代码，将MyBatisPlus集成到护理项目模块中使用，方便稍后参考护理项目模块改造后的代码来改造代码生成模板</p>
<ol>
<li><strong>改造NursingProjectMapper</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">zzyl</span>.<span class="property">nursing</span>.<span class="property">mapper</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">List</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.<span class="property">baomidou</span>.<span class="property">mybatisplus</span>.<span class="property">core</span>.<span class="property">mapper</span>.<span class="property">BaseMapper</span>;</span><br><span class="line"><span class="keyword">import</span> com.<span class="property">zzyl</span>.<span class="property">nursing</span>.<span class="property">domain</span>.<span class="property">NursingProject</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">apache</span>.<span class="property">ibatis</span>.<span class="property">annotations</span>.<span class="property">Mapper</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 护理项目Mapper接口</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> <span class="variable">ruoyi</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-09-26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="title class_">Mapper</span></span><br><span class="line">public interface <span class="title class_">NursingProjectMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;<span class="title class_">NursingProject</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="title class_">NursingProject</span> <span class="title function_">selectNursingProjectById</span>(<span class="title class_">Long</span> id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="title class_">List</span>&lt;<span class="title class_">NursingProject</span>&gt; <span class="title function_">selectNursingProjectList</span>(<span class="title class_">NursingProject</span> nursingProject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public int <span class="title function_">insertNursingProject</span>(<span class="title class_">NursingProject</span> nursingProject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public int <span class="title function_">updateNursingProject</span>(<span class="title class_">NursingProject</span> nursingProject);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public int <span class="title function_">deleteNursingProjectById</span>(<span class="title class_">Long</span> id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids 需要删除的数据主键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public int <span class="title function_">deleteNursingProjectByIds</span>(<span class="title class_">Long</span>[] ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>改造NursingProjectService</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.nursing.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.nursing.domain.NursingProject;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 护理项目Service接口</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-09-26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">INursingProjectService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;NursingProject&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> NursingProject <span class="title function_">selectNursingProjectById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;NursingProject&gt; <span class="title function_">selectNursingProjectList</span><span class="params">(NursingProject nursingProject)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertNursingProject</span><span class="params">(NursingProject nursingProject)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateNursingProject</span><span class="params">(NursingProject nursingProject)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids 需要删除的护理项目主键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteNursingProjectByIds</span><span class="params">(Long[] ids)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除护理项目信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteNursingProjectById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>改造NursingProjectServiceImpl</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.nursing.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.DateUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.nursing.mapper.NursingProjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.nursing.domain.NursingProject;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.nursing.service.INursingProjectService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 护理项目Service业务层处理</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024-09-26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NursingProjectServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;NursingProjectMapper, NursingProject&gt; <span class="keyword">implements</span> <span class="title class_">INursingProjectService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NursingProjectMapper nursingProjectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NursingProject <span class="title function_">selectNursingProjectById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line"><span class="comment">//        return nursingProjectMapper.selectNursingProjectById(id);</span></span><br><span class="line">        <span class="keyword">return</span> getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询护理项目列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 护理项目</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;NursingProject&gt; <span class="title function_">selectNursingProjectList</span><span class="params">(NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> nursingProjectMapper.selectNursingProjectList(nursingProject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertNursingProject</span><span class="params">(NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        nursingProject.setCreateTime(DateUtils.getNowDate());</span><br><span class="line"><span class="comment">//        return nursingProjectMapper.insertNursingProject(nursingProject);</span></span><br><span class="line">        <span class="keyword">return</span> save(nursingProject) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nursingProject 护理项目</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateNursingProject</span><span class="params">(NursingProject nursingProject)</span></span><br><span class="line">    &#123;</span><br><span class="line">        nursingProject.setUpdateTime(DateUtils.getNowDate());</span><br><span class="line"><span class="comment">//        return nursingProjectMapper.updateNursingProject(nursingProject);</span></span><br><span class="line">        <span class="keyword">return</span> updateById(nursingProject) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除护理项目</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids 需要删除的护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteNursingProjectByIds</span><span class="params">(Long[] ids)</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//        return nursingProjectMapper.deleteNursingProjectByIds(ids);</span></span><br><span class="line">        <span class="keyword">return</span> removeByIds(Arrays.asList(ids)) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除护理项目信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 护理项目主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteNursingProjectById</span><span class="params">(Long id)</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//        return nursingProjectMapper.deleteNursingProjectById(id);</span></span><br><span class="line">        <span class="keyword">return</span> removeById(id) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关于查询列表，由于不同的项目存在不同的查询参数以及不同的条件，使用MP构建不仅复杂且难以复用到模板中，所以直接使用若依框架生成的MyBatis原生代码即可</p>
</blockquote>
<ol start="4">
<li><font color='red'><strong>其他必要修改</strong></font></li>
</ol>
<p>集成MP之后，项目中的BaseEntity类中的字段有些会受影响，需要添加如下注解</p>
<p>由于这几个字段，并不会跟数据库中的表字段进行映射，必须要添加@TableField(exist &#x3D; false)表示，表示该字段不存在于数据库表中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Entity基类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 搜索值 */</span></span><br><span class="line">    <span class="meta">@JsonIgnore</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String searchValue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 请求参数 */</span></span><br><span class="line">    <span class="meta">@JsonInclude(JsonInclude.Include.NON_EMPTY)</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; params;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>注意事项：</p>
<p>修改后重启项目可能会出现MP依赖丢失问题，比如<code>FileNotFoundException:...</code>（就是说mybaits-plus文件不存在）</p>
<p>解决方式：设置中切换一个空的maven仓库，把所有依赖重新下载</p>
<h3 id="改造代码生成模板"><a href="#改造代码生成模板" class="headerlink" title="改造代码生成模板"></a>改造代码生成模板</h3><p>在目前的模板文件中，咱们需要修改的模板共有3个，分别是：</p>
<ul>
<li>mapper.java.vm   继承BaseMapper</li>
<li>service.java.vm   继承IService<T></li>
<li>serviceImpl.java.vm    继承ServiceImpl&lt;XxxMapper, T&gt;  常见方法的使用（单表的增删改查）</li>
</ul>
<blockquote>
<ul>
<li>domain.java.vm  无需修改，类名与表名一致，会自动映射，主键已经在yaml文件中配置</li>
<li>controller.java.vm 无需修改，保留原有的接口方法和命名</li>
</ul>
</blockquote>
<p><strong>mapper.java.vm</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;subClassName&#125;;</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;Mapper接口</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>&#123;ClassName&#125;Mapper <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;$&#123;ClassName&#125;&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;ClassName&#125; select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;ClassName&#125;&gt; select$&#123;ClassName&#125;List($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> insert$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> update$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125;s 需要删除的数据主键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s);</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除$&#123;subTable.functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125;s 需要删除的数据主键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;s($&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量新增$&#123;subTable.functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;subclassName&#125;List $&#123;subTable.functionName&#125;列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> batch$&#123;subClassName&#125;(List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List);</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过$&#123;functionName&#125;主键删除$&#123;subTable.functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);</span><br><span class="line">#end</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>service.java.vm</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;Service接口</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">I$</span>&#123;ClassName&#125;Service <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;$&#123;ClassName&#125;&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;ClassName&#125; select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;ClassName&#125;&gt; select$&#123;ClassName&#125;List($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> insert$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> update$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125;s 需要删除的$&#123;functionName&#125;主键集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除$&#123;functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>serviceImpl.java.vm</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;createTime&#x27;</span> || $column.javaField == <span class="string">&#x27;updateTime&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.DateUtils;</span><br><span class="line">#<span class="keyword">break</span></span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;subClassName&#125;;</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.mapper.$&#123;ClassName&#125;Mapper;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.service.I$&#123;ClassName&#125;Service;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;Service业务层处理</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;ClassName&#125;ServiceImpl <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;$&#123;ClassName&#125;Mapper, $&#123;ClassName&#125;&gt; <span class="keyword">implements</span> <span class="title class_">I$</span>&#123;ClassName&#125;Service</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;ClassName&#125;Mapper $&#123;className&#125;Mapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;ClassName&#125; select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        ##<span class="keyword">return</span> $&#123;className&#125;Mapper.select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">        <span class="keyword">return</span> getById($&#123;pkColumn.javaField&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;ClassName&#125;&gt; select$&#123;ClassName&#125;List($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> $&#123;className&#125;Mapper.select$&#123;ClassName&#125;List($&#123;className&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> insert$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;createTime&#x27;</span>)</span><br><span class="line">        $&#123;className&#125;.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> $&#123;className&#125;Mapper.insert$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        insert$&#123;subClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> rows;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">        ##<span class="keyword">return</span> $&#123;className&#125;Mapper.insert$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> save($&#123;className&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">#end</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> update$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;updateTime&#x27;</span>)</span><br><span class="line">        $&#123;className&#125;.setUpdateTime(DateUtils.getNowDate());</span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;($&#123;className&#125;.get$&#123;pkColumn.capJavaField&#125;());</span><br><span class="line">        insert$&#123;subClassName&#125;($&#123;className&#125;);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.update$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> updateById($&#123;className&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125;s 需要删除的$&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s)</span><br><span class="line">    &#123;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;s($&#123;pkColumn.javaField&#125;s);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaField&#125;s);</span><br><span class="line">        <span class="keyword">return</span> removeByIds(Arrays.asList($&#123;pkColumn.javaField&#125;s)) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除$&#123;functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">        <span class="keyword">return</span> removeById($&#123;pkColumn.javaField&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;subTable.functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> insert$&#123;subClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List = $&#123;className&#125;.get$&#123;subClassName&#125;List();</span><br><span class="line">        $&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125; = $&#123;className&#125;.get$&#123;pkColumn.capJavaField&#125;();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull($&#123;subclassName&#125;List))</span><br><span class="line">        &#123;</span><br><span class="line">            List&lt;$&#123;subClassName&#125;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;$&#123;subClassName&#125;&gt;();</span><br><span class="line">            <span class="keyword">for</span> ($&#123;subClassName&#125; $&#123;subclassName&#125; : $&#123;subclassName&#125;List)</span><br><span class="line">            &#123;</span><br><span class="line">                $&#123;subclassName&#125;.set$&#123;subTableFkClassName&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">                list.add($&#123;subclassName&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (list.size() &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                $&#123;className&#125;Mapper.batch$&#123;subClassName&#125;(list);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">#end</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color='red'><strong>其他必要修改</strong></font></p>
<p>集成MP之后，项目中的BaseEntity类中的字段有些会受影响，需要添加如下注解</p>
<p>由于这几个字段，并不会跟数据库中的表字段进行映射，必须要添加@TableField(exist &#x3D; false)表示，<strong>表示该字段不存在于数据库表中</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Entity基类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 搜索值 */</span></span><br><span class="line">    <span class="meta">@JsonIgnore</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String searchValue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 请求参数 */</span></span><br><span class="line">    <span class="meta">@JsonInclude(JsonInclude.Include.NON_EMPTY)</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; params;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="字段自动填充"><a href="#字段自动填充" class="headerlink" title="字段自动填充"></a>字段自动填充</h3><p>MyBatis-Plus 提供的字段自动填充功能是一种非常实用的特性，它能够在插入或更新数据库记录时<strong>自动填充一些公共字段</strong>，如创建时间（createTime）、更新时间（updateTime）、创建人（createBy）、更新人（updateBy）等。这一功能极大地简化了开发过程，减少了重复的代码编写，提高了开发效率</p>
<p><img src="/img/loading.gif" data-original="/img/assests/1.png" alt="1"></p>
<p>官网链接：<a target="_blank" rel="noopener" href="https://baomidou.com/guides/auto-fill-field/">https://baomidou.com/guides/auto-fill-field/</a></p>
<p>在MybatisPlus中通过两步可以实现这个功能：</p>
<ol>
<li>在实体类中，使用<code>@TableField</code>注解，来标明哪些字段是需要自动填充的，并且需要指定填充策略</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.common.core.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonIgnore;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonInclude;</span><br><span class="line"><span class="keyword">import</span> io.Swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.Swagger.annotations.ApiModelProperty;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Entity基类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ruoyi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ApiModel(&quot;Entity基类&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 搜索值 */</span></span><br><span class="line">    <span class="meta">@JsonIgnore</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String searchValue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 创建者 */</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;创建者&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> String createBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 创建时间 */</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;创建时间&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 更新者 */</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;更新者&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> String updateBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 更新时间 */</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;更新时间&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 备注 */</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;备注&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String remark;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 请求参数 */</span></span><br><span class="line">    <span class="meta">@JsonInclude(JsonInclude.Include.NON_EMPTY)</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;请求参数&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; params;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>在zzyl-framework模块中新增MyMetaObjectHandler 来处理字段自动填充</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/9b8df4ce-8814-493d-b53c-e6b5915c28d1.png" alt="9b8df4ce-8814-493d-b53c-e6b5915c28d1"></p>
<p>详细的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.framework.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.model.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, Date.class, DateUtils.getNowDate());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createBy&quot;</span>, String.class, String.valueOf(getLoginUser()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, Date.class, DateUtils.getNowDate());</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateBy&quot;</span>, String.class, String.valueOf(getLoginUser()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前登录人的ID</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 登录人ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getLoginUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> SecurityUtils.getLoginUser();</span><br><span class="line">        <span class="keyword">if</span> (loginUser != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> loginUser.getUserId();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1L</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="字段自动填充测试"><a href="#字段自动填充测试" class="headerlink" title="字段自动填充测试"></a>字段自动填充测试</h3><p>以上所有内容修改完成以后，<strong>删除新增方法和修改方法中填充字段的代码</strong>，然后重启后端项目，来测试代码的有效性，可以新增或修改护理项目，检查是否能够自动填充数据。</p>
<p>如果测试修改发现没有自动修改数据库表中的updateTime和updateBy字段，原因在官网中说明了：</p>
<blockquote>
<p><code>MetaObjectHandler</code> 提供的默认方法策略是：如果属性有值则不覆盖，如果填充值为 <code>null</code> 则不填充。</p>
</blockquote>
<p>此时，需要换一种更新方式，修改后的代码如下：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package com<span class="selector-class">.zzyl</span><span class="selector-class">.framework</span><span class="selector-class">.interceptor</span>;</span><br><span class="line"></span><br><span class="line">import com<span class="selector-class">.baomidou</span><span class="selector-class">.mybatisplus</span><span class="selector-class">.core</span><span class="selector-class">.handlers</span><span class="selector-class">.MetaObjectHandler</span>;</span><br><span class="line">import com<span class="selector-class">.zzyl</span><span class="selector-class">.common</span><span class="selector-class">.core</span><span class="selector-class">.domain</span><span class="selector-class">.model</span><span class="selector-class">.LoginUser</span>;</span><br><span class="line">import com<span class="selector-class">.zzyl</span><span class="selector-class">.common</span><span class="selector-class">.utils</span><span class="selector-class">.SecurityUtils</span>;</span><br><span class="line">import org<span class="selector-class">.apache</span><span class="selector-class">.ibatis</span><span class="selector-class">.reflection</span><span class="selector-class">.MetaObject</span>;</span><br><span class="line">import org<span class="selector-class">.springframework</span><span class="selector-class">.stereotype</span><span class="selector-class">.Component</span>;</span><br><span class="line"></span><br><span class="line">import java<span class="selector-class">.util</span><span class="selector-class">.Date</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@Component</span></span><br><span class="line">public class MyMetaObjectHandler implements MetaObjectHandler &#123;</span><br><span class="line">    <span class="keyword">@Override</span></span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        this<span class="selector-class">.strictInsertFill</span>(metaObject, &quot;createTime&quot;, Date.class, new Date());</span><br><span class="line">        <span class="comment">// 自动填充创建人</span></span><br><span class="line">        this<span class="selector-class">.strictInsertFill</span>(metaObject, &quot;createBy&quot;, String.class, String.valueOf(getLoginUser()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@Override</span></span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        this<span class="selector-class">.setFieldValByName</span>(&quot;updateTime&quot;, new Date(), metaObject);</span><br><span class="line">        this<span class="selector-class">.setFieldValByName</span>(&quot;updateBy&quot;, String.valueOf(getLoginUser()), metaObject);</span><br><span class="line"><span class="comment">//        this.strictUpdateFill(metaObject, &quot;updateTime&quot;, Date.class, new Date());</span></span><br><span class="line"><span class="comment">//        this.strictUpdateFill(metaObject, &quot;updateBy&quot;, String.class, String.valueOf(getLoginUser()));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Long <span class="built_in">getLoginUser</span>() &#123;</span><br><span class="line">        LoginUser loginUser = SecurityUtils<span class="selector-class">.getLoginUser</span>();</span><br><span class="line"></span><br><span class="line">        if (loginUser != null) &#123;</span><br><span class="line">            return loginUser<span class="selector-class">.getUserId</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        return <span class="number">1</span>L;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试通过后，能够自动填充数据了。那么，接下来，继续修改模板，去掉新增方法和修改方法补全字段属性的代码，修改后的模板为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line">#foreach ($column in $columns)</span><br><span class="line">#<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;createTime&#x27;</span> || $column.javaField == <span class="string">&#x27;updateTime&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.DateUtils;</span><br><span class="line">#<span class="keyword">break</span></span><br><span class="line">#end</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;subClassName&#125;;</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.mapper.$&#123;ClassName&#125;Mapper;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.service.I$&#123;ClassName&#125;Service;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;Service业务层处理</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;ClassName&#125;ServiceImpl <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;$&#123;ClassName&#125;Mapper, $&#123;ClassName&#125;&gt; <span class="keyword">implements</span> <span class="title class_">I$</span>&#123;ClassName&#125;Service</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;ClassName&#125;Mapper $&#123;className&#125;Mapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;ClassName&#125; select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">        <span class="keyword">return</span> getById($&#123;pkColumn.javaField&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;ClassName&#125;&gt; select$&#123;ClassName&#125;List($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> $&#123;className&#125;Mapper.select$&#123;ClassName&#125;List($&#123;className&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> insert$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">###foreach ($column in $columns)</span><br><span class="line">###<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;createTime&#x27;</span>)</span><br><span class="line">##        $&#123;className&#125;.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">###end</span><br><span class="line">###end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> $&#123;className&#125;Mapper.insert$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        insert$&#123;subClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> rows;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.insert$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> save($&#123;className&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">#end</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> update$&#123;ClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">###foreach ($column in $columns)</span><br><span class="line">###<span class="keyword">if</span>($column.javaField == <span class="string">&#x27;updateTime&#x27;</span>)</span><br><span class="line">##        $&#123;className&#125;.setUpdateTime(DateUtils.getNowDate());</span><br><span class="line">###end</span><br><span class="line">###end</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;($&#123;className&#125;.get$&#123;pkColumn.capJavaField&#125;());</span><br><span class="line">        insert$&#123;subClassName&#125;($&#123;className&#125;);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.update$&#123;ClassName&#125;($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> updateById($&#123;className&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125;s 需要删除的$&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s)</span><br><span class="line">    &#123;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;s($&#123;pkColumn.javaField&#125;s);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaField&#125;s);</span><br><span class="line">        <span class="keyword">return</span> removeByIds(Arrays.asList($&#123;pkColumn.javaField&#125;s)) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除$&#123;functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;pkColumn.javaField&#125; $&#123;functionName&#125;主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">#end</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line">        $&#123;className&#125;Mapper.delete$&#123;subClassName&#125;By$&#123;subTableFkClassName&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">#end</span><br><span class="line">##        <span class="keyword">return</span> $&#123;className&#125;Mapper.delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">        <span class="keyword">return</span> removeById($&#123;pkColumn.javaField&#125;) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">#<span class="keyword">if</span>($table.sub)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;subTable.functionName&#125;信息</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $&#123;className&#125; $&#123;functionName&#125;对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> insert$&#123;subClassName&#125;($&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;$&#123;subClassName&#125;&gt; $&#123;subclassName&#125;List = $&#123;className&#125;.get$&#123;subClassName&#125;List();</span><br><span class="line">        $&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125; = $&#123;className&#125;.get$&#123;pkColumn.capJavaField&#125;();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull($&#123;subclassName&#125;List))</span><br><span class="line">        &#123;</span><br><span class="line">            List&lt;$&#123;subClassName&#125;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;$&#123;subClassName&#125;&gt;();</span><br><span class="line">            <span class="keyword">for</span> ($&#123;subClassName&#125; $&#123;subclassName&#125; : $&#123;subclassName&#125;List)</span><br><span class="line">            &#123;</span><br><span class="line">                $&#123;subclassName&#125;.set$&#123;subTableFkClassName&#125;($&#123;pkColumn.javaField&#125;);</span><br><span class="line">                list.add($&#123;subclassName&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (list.size() &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                $&#123;className&#125;Mapper.batch$&#123;subClassName&#125;(list);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">#end</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="集成Swagger"><a href="#集成Swagger" class="headerlink" title="集成Swagger"></a>集成Swagger</h2><p>需要修改2个模板文件：<strong>controller.java.vm</strong>和<strong>domain.java.vm，</strong>先来修改<strong>controller.java.vm</strong>文件，具体的修改的内容如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.R;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.access.prepost.PreAuthorize;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.DeleteMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.annotation.Log;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.controller.BaseController;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.domain.AjaxResult;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.enums.BusinessType;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.domain.$&#123;ClassName&#125;;</span><br><span class="line"><span class="keyword">import</span> $&#123;packageName&#125;.service.I$&#123;ClassName&#125;Service;</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.utils.poi.ExcelUtil;</span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line"><span class="keyword">import</span> com.zzyl.common.core.page.TableDataInfo;</span><br><span class="line">#elseif($table.tree)</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;functionName&#125;Controller</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;author&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> $&#123;datetime&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/$&#123;moduleName&#125;/$&#123;businessName&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;$&#123;functionName&#125;相关接口&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;ClassName&#125;Controller <span class="keyword">extends</span> <span class="title class_">BaseController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> I$&#123;ClassName&#125;Service $&#123;className&#125;Service;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:list&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;查询$&#123;functionName&#125;列表&quot;)</span></span><br><span class="line">#<span class="keyword">if</span>($table.crud || $table.sub)</span><br><span class="line">    <span class="keyword">public</span> TableDataInfo&lt;List&lt;$&#123;ClassName&#125;&gt;&gt; list(<span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;查询条件&quot;)</span> $&#123;ClassName&#125; $&#123;className&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">        startPage();</span><br><span class="line">        List&lt;$&#123;ClassName&#125;&gt; list = $&#123;className&#125;Service.select$&#123;ClassName&#125;List($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">    &#125;</span><br><span class="line">#elseif($table.tree)</span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">list</span><span class="params">($&#123;ClassName&#125; $&#123;className&#125;)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;$&#123;ClassName&#125;&gt; list = $&#123;className&#125;Service.select$&#123;ClassName&#125;List($&#123;className&#125;);</span><br><span class="line">        <span class="keyword">return</span> success(list);</span><br><span class="line">    &#125;</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出$&#123;functionName&#125;列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:export&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;$&#123;functionName&#125;&quot;, businessType = BusinessType.EXPORT)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/export&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;导出$&#123;functionName&#125;列表&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">export</span><span class="params">(HttpServletResponse response, <span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;查询条件&quot;)</span> $&#123;ClassName&#125; $&#123;className&#125;)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;$&#123;ClassName&#125;&gt; list = $&#123;className&#125;Service.select$&#123;ClassName&#125;List($&#123;className&#125;);</span><br><span class="line">        ExcelUtil&lt;$&#123;ClassName&#125;&gt; util = <span class="keyword">new</span> <span class="title class_">ExcelUtil</span>&lt;$&#123;ClassName&#125;&gt;($&#123;ClassName&#125;.class);</span><br><span class="line">        util.exportExcel(response, list, <span class="string">&quot;$&#123;functionName&#125;数据&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取$&#123;functionName&#125;详细信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:query&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/&#123;$&#123;pkColumn.javaField&#125;&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;获取$&#123;functionName&#125;详细信息&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R&lt;$&#123;ClassName&#125;&gt; getInfo(<span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;ID&quot;, required = true)</span></span><br><span class="line">                                  <span class="meta">@PathVariable(&quot;$&#123;pkColumn.javaField&#125;&quot;)</span> $&#123;pkColumn.javaType&#125; $&#123;pkColumn.javaField&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">##        <span class="keyword">return</span> success($&#123;className&#125;Service.select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;));</span><br><span class="line">        <span class="keyword">return</span> R.ok($&#123;className&#125;Service.select$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;($&#123;pkColumn.javaField&#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:add&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;$&#123;functionName&#125;&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;新增$&#123;functionName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">add</span><span class="params">(<span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;实体&quot;, required = true)</span> <span class="meta">@RequestBody</span> $&#123;ClassName&#125; $&#123;className&#125;)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax($&#123;className&#125;Service.insert$&#123;ClassName&#125;($&#123;className&#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:edit&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;$&#123;functionName&#125;&quot;, businessType = BusinessType.UPDATE)</span></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;修改$&#123;functionName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">edit</span><span class="params">(<span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;实体&quot;, required = true)</span>  <span class="meta">@RequestBody</span> $&#123;ClassName&#125; $&#123;className&#125;)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax($&#123;className&#125;Service.update$&#123;ClassName&#125;($&#123;className&#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除$&#123;functionName&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;$&#123;permissionPrefix&#125;:remove&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Log(title = &quot;$&#123;functionName&#125;&quot;, businessType = BusinessType.DELETE)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;$&#123;pkColumn.javaField&#125;s&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;删除$&#123;functionName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">remove</span><span class="params">(<span class="meta">@ApiParam(value = &quot;$&#123;functionName&#125;ID数组&quot;, required = true)</span> <span class="meta">@PathVariable</span> $&#123;pkColumn.javaType&#125;[] $&#123;pkColumn.javaField&#125;s)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> toAjax($&#123;className&#125;Service.delete$&#123;ClassName&#125;By$&#123;pkColumn.capJavaField&#125;s($&#123;pkColumn.javaField&#125;s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="日期类型升级"><a href="#日期类型升级" class="headerlink" title="日期类型升级"></a>日期类型升级</h2><p>若依目前提供的代码中，如果遇到日期类型则使用的是Date，由于目前使用比较流行的日期时间类型是LocalDateTime类型，咱们也可以把它改为该类型进行使用</p>
<blockquote>
<p><strong>知识扩展</strong></p>
<p>Date类型与LocalDateTime的区别？</p>
<ol>
<li>不可变性与线程安全性 <ol>
<li>Date一旦创建Date对象，可以通过setTime(long time)进行修改，多线程下存在线程安全问题</li>
<li>LocalDateTime是不可变的，线程安全</li>
</ol>
</li>
<li>时间精度<ol>
<li>Date可以表示到毫秒的时间值</li>
<li>LocalDateTime可以表示到纳秒的时间值</li>
</ol>
</li>
<li>易用性：LocalDateTime的API设计的更现代化，易于使用</li>
</ol>
</blockquote>
<p>在目前代码生成中，其中字段详细这一栏中的Java类型并不支持LocalDateTime类型，所以咱们需要在前端也要修改其内容，让它支持LocalDateTime</p>
<p><img src="/img/loading.gif" data-original="/img/assests/a802e413-d94a-45ee-92a2-45c2a505bc44.png" alt="a802e413-d94a-45ee-92a2-45c2a505bc44"></p>
<p>打开前端项目，找到src&#x2F;views&#x2F;tool&#x2F;gen&#x2F;editTable.vue文件，在这个文件添加中一行代码，如下：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/86b96ebf-edcd-404f-8053-7f0e2c57cf22.png" alt="86b96ebf-edcd-404f-8053-7f0e2c57cf22"></p>
<p>当前端选择了LocalDateTime类型之后，在后端的代码生成中，需要导入对应的包才可以</p>
<p>咱们打开VelocityUtils类，这里面有<strong>处理导入包的逻辑</strong>，找到getImportList方法，在其中添加对应的包导入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据列类型获取导入包</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> genTable 业务表对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回需要导入的包列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HashSet&lt;String&gt; <span class="title function_">getImportList</span><span class="params">(GenTable genTable)</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;GenTableColumn&gt; columns = genTable.getColumns();</span><br><span class="line">    <span class="type">GenTable</span> <span class="variable">subGenTable</span> <span class="operator">=</span> genTable.getSubTable();</span><br><span class="line">    HashSet&lt;String&gt; importList = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotNull(subGenTable))</span><br><span class="line">    &#123;</span><br><span class="line">        importList.add(<span class="string">&quot;java.util.List&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (GenTableColumn column : columns)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!column.isSuperColumn() &amp;&amp; GenConstants.TYPE_DATE.equals(column.getJavaType()))</span><br><span class="line">        &#123;</span><br><span class="line">            importList.add(<span class="string">&quot;java.util.Date&quot;</span>);</span><br><span class="line">            importList.add(<span class="string">&quot;com.fasterxml.jackson.annotation.JsonFormat&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// 如果字段类型在前端选择的是LocalDateTime，则导入对应的包</span></span><br><span class="line">        <span class="keyword">if</span> (!column.isSuperColumn() &amp;&amp; GenConstants.TYPE_LOCAL_DATE_TYPE.equals(column.getJavaType()))</span><br><span class="line">        &#123;</span><br><span class="line">            importList.add(<span class="string">&quot;java.time.LocalDateTime&quot;</span>);</span><br><span class="line">            <span class="comment">// 导入这个是为了格式化日期</span></span><br><span class="line">            importList.add(<span class="string">&quot;com.fasterxml.jackson.annotation.JsonFormat&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!column.isSuperColumn() &amp;&amp; GenConstants.TYPE_BIGDECIMAL.equals(column.getJavaType()))</span><br><span class="line">        &#123;</span><br><span class="line">            importList.add(<span class="string">&quot;java.math.BigDecimal&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> importList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>新增代码中的<em><strong>TYPE_LOCAL_DATE_TYPE</strong></em>需要定义在 <code>GenConstants </code>常量类中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** JDK8时间类型 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_LOCAL_DATE_TYPE= <span class="string">&quot;LocalDateTime&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>修改模块文件domain.java.vm文件，修改的内容如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span>(!$table.isSuperColumn($column.javaField))</span><br><span class="line">    <span class="comment">/** $column.columnComment */</span></span><br><span class="line">	#<span class="keyword">if</span>($column.list)</span><br><span class="line">	#set($parentheseIndex=$column.columnComment.indexOf(<span class="string">&quot;（&quot;</span>))</span><br><span class="line">	#<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">	#set($comment=$column.columnComment.substring(<span class="number">0</span>, $parentheseIndex))</span><br><span class="line">	#<span class="keyword">else</span></span><br><span class="line">	#set($comment=$column.columnComment)</span><br><span class="line">	#end</span><br><span class="line">	#<span class="keyword">if</span>($parentheseIndex != -<span class="number">1</span>)</span><br><span class="line">	    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, readConverterExp = &quot;$column.readConverterExp()&quot;)</span></span><br><span class="line">	#elseif($column.javaType == <span class="string">&#x27;Date&#x27;</span> || $column.javaType == <span class="string">&#x27;LocalDateTime&#x27;</span>)</span><br><span class="line">	    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">	    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;, width = 30, dateFormat = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">	#<span class="keyword">else</span></span><br><span class="line">	    <span class="meta">@Excel(name = &quot;$&#123;comment&#125;&quot;)</span></span><br><span class="line">	#end</span><br><span class="line">	#end</span><br><span class="line">	    <span class="meta">@ApiModelProperty(&quot;$column.columnComment&quot;)</span></span><br><span class="line">	    <span class="keyword">private</span> $column.javaType $column.javaField;</span><br><span class="line">#end</span><br></pre></td></tr></table></figure>



<h2 id="其他修改"><a href="#其他修改" class="headerlink" title="其他修改"></a>其他修改</h2><ol>
<li><strong>修改生成包路径和生成模块名</strong></li>
</ol>
<p>若依默认生成的包路径和模块名都是system，效果如下：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/29b1b4d6-0da1-4e2a-8b46-5071a7ba9915.png" alt="29b1b4d6-0da1-4e2a-8b46-5071a7ba9915"></p>
<p>而项目中用到的包路径和模块名都是nursing，如果要将这里的默认值改为nursing，只需要修改配置文件即可</p>
<p>修改zzyl-generator模块下的generator.yml配置文件，修改后的内容如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 代码生成</span></span><br><span class="line"><span class="attr">gen:</span></span><br><span class="line">  <span class="comment"># 作者</span></span><br><span class="line">  <span class="attr">author:</span> <span class="string">Norlcyan</span></span><br><span class="line">  <span class="comment"># 默认生成包路径 system 需改成自己的模块名称 如 system monitor tool</span></span><br><span class="line">  <span class="attr">packageName:</span> <span class="string">com.zzyl.nursing</span></span><br><span class="line">  <span class="comment"># 自动去除表前缀，默认是false</span></span><br><span class="line">  <span class="attr">autoRemovePre:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 表前缀（生成类名不会包含表前缀，多个用逗号分隔）</span></span><br><span class="line">  <span class="attr">tablePrefix:</span> <span class="string">sys_</span></span><br><span class="line">  <span class="comment"># 是否允许生成文件覆盖到本地（自定义路径），默认不允许</span></span><br><span class="line">  <span class="attr">allowOverwrite:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>修改物理类型对应的Java类型</strong></li>
</ol>
<p>若依默认生成的字段信息中很多数据库中的<code>int</code>类型和<code>tinyint</code>类型对应的Java类型都是<code>Long</code>，如下图所示：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/45265627-c612-4f03-9c6c-254e1448a7eb.png" alt="45265627-c612-4f03-9c6c-254e1448a7eb"></p>
<p>可以通过修改zzyl-generator模块下的<strong>GenUtils</strong>工具类中的代码来将其统一改为INTEGER类型，具体的修改位置为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化列属性字段</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">initColumnField</span><span class="params">(GenTableColumn column, GenTable table)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">dataType</span> <span class="operator">=</span> getDbType(column.getColumnType());</span><br><span class="line">    <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> column.getColumnName();</span><br><span class="line">    column.setTableId(table.getTableId());</span><br><span class="line">    column.setCreateBy(table.getCreateBy());</span><br><span class="line">    <span class="comment">// 设置java字段名</span></span><br><span class="line">    column.setJavaField(StringUtils.toCamelCase(columnName));</span><br><span class="line">    <span class="comment">// 设置默认类型</span></span><br><span class="line">    column.setJavaType(GenConstants.TYPE_STRING);</span><br><span class="line">    column.setQueryType(GenConstants.QUERY_EQ);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arraysContains(GenConstants.COLUMNTYPE_STR, dataType) || arraysContains(GenConstants.COLUMNTYPE_TEXT, dataType))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 字符串长度超过500设置为文本域</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">columnLength</span> <span class="operator">=</span> getColumnLength(column.getColumnType());</span><br><span class="line">        <span class="type">String</span> <span class="variable">htmlType</span> <span class="operator">=</span> columnLength &gt;= <span class="number">500</span> || arraysContains(GenConstants.COLUMNTYPE_TEXT, dataType) ? GenConstants.HTML_TEXTAREA : GenConstants.HTML_INPUT;</span><br><span class="line">        column.setHtmlType(htmlType);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (arraysContains(GenConstants.COLUMNTYPE_TIME, dataType))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 将日期时间类型改为LocalDateTime</span></span><br><span class="line">        column.setJavaType(GenConstants.TYPE_LOCAL_DATE_TIME);</span><br><span class="line">        column.setHtmlType(GenConstants.HTML_DATETIME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (arraysContains(GenConstants.COLUMNTYPE_NUMBER, dataType))</span><br><span class="line">    &#123;</span><br><span class="line">        column.setHtmlType(GenConstants.HTML_INPUT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果是浮点型 统一用BigDecimal</span></span><br><span class="line">        String[] str = StringUtils.split(StringUtils.substringBetween(column.getColumnType(), <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>), <span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (str != <span class="literal">null</span> &amp;&amp; str.length == <span class="number">2</span> &amp;&amp; Integer.parseInt(str[<span class="number">1</span>]) &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            column.setJavaType(GenConstants.TYPE_BIGDECIMAL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果是整形</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str != <span class="literal">null</span> &amp;&amp; str.length == <span class="number">1</span> &amp;&amp; Integer.parseInt(str[<span class="number">0</span>]) &lt;= <span class="number">10</span></span><br><span class="line">                || GenConstants.MYSQL_TINYINT.equals(column.getColumnType()) || GenConstants.MYSQL_INT.equals(column.getColumnType()))</span><br><span class="line">        &#123;</span><br><span class="line">            column.setJavaType(GenConstants.TYPE_INTEGER);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 长整形</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            column.setJavaType(GenConstants.TYPE_LONG);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ......省略了后续代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>新增代码中的 LocalDateTime、 tinyint 和 int 类型需要定义在 <code>GenConstants </code>常量类中。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** LocalDateTime时间类型 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TYPE_LOCAL_DATE_TIME</span> <span class="operator">=</span> <span class="string">&quot;LocalDateTime&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** MySql tinyint 类型 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYSQL_TINYINT</span> <span class="operator">=</span> <span class="string">&quot;tinyint&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** MySql int 类型 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYSQL_INT</span> <span class="operator">=</span> <span class="string">&quot;int&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>这样，在系统中导入表结构后，数据库中的<code>tinyint</code>类型和<code>int</code>类型对应的默认Java类型就都是<code>Integer</code>类型了</p>
<h1 id="前后端快速开发"><a href="#前后端快速开发" class="headerlink" title="前后端快速开发"></a>前后端快速开发</h1><h2 id="护理项目页面改造"><a href="#护理项目页面改造" class="headerlink" title="护理项目页面改造"></a>护理项目页面改造</h2><h3 id="列表改造"><a href="#列表改造" class="headerlink" title="列表改造"></a>列表改造</h3><p>根据页面原型实现的效果图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/1280X1280.PNG" alt="1280X1280"></p>
<p>目前使用若依快速代码生成代码的效果图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B64.PNG" alt="若依框架4"></p>
<p>经过对比，有以下几点不同</p>
<ul>
<li>搜索栏缺少<strong>状态</strong>条件</li>
<li>状态展示为数字，应该展示<strong>禁用</strong>或<strong>启用</strong></li>
<li>缺少<strong>启用&#x2F;禁用</strong>按钮和功能，多了几个不需要的按钮</li>
<li>没有序号，多了一列编号，显示的是数据库表中的id</li>
<li>创建时间没有展示<strong>时分秒</strong></li>
</ul>
<p>找到src&#x2F;views&#x2F;nursing&#x2F;project&#x2F;index.vue文件，护理项目的前端代码已经添加了详细的注释，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 搜索表单  start --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;queryParams&quot; ref=&quot;queryRef&quot; :inline=&quot;true&quot; v-show=&quot;showSearch&quot; label-width=&quot;68px&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;名称&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;queryParams.name&quot;</span><br><span class="line">          placeholder=&quot;请输入名称&quot;</span><br><span class="line">          clearable</span><br><span class="line">          @keyup.enter=&quot;handleQuery&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- 搜索表单 end --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 按钮区域 start --&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;10&quot; class=&quot;mb8&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;1.5&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          plain</span><br><span class="line">          icon=&quot;Plus&quot;</span><br><span class="line">          @click=&quot;handleAdd&quot;</span><br><span class="line">          v-hasPermi=&quot;[&#x27;nursing:project:add&#x27;]&quot;</span><br><span class="line">        &gt;新增&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;1.5&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;success&quot;</span><br><span class="line">          plain</span><br><span class="line">          icon=&quot;Edit&quot;</span><br><span class="line">          :disabled=&quot;single&quot;</span><br><span class="line">          @click=&quot;handleUpdate&quot;</span><br><span class="line">          v-hasPermi=&quot;[&#x27;nursing:project:edit&#x27;]&quot;</span><br><span class="line">        &gt;修改&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;1.5&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;danger&quot;</span><br><span class="line">          plain</span><br><span class="line">          icon=&quot;Delete&quot;</span><br><span class="line">          :disabled=&quot;multiple&quot;</span><br><span class="line">          @click=&quot;handleDelete&quot;</span><br><span class="line">          v-hasPermi=&quot;[&#x27;nursing:project:remove&#x27;]&quot;</span><br><span class="line">        &gt;删除&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;1.5&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;warning&quot;</span><br><span class="line">          plain</span><br><span class="line">          icon=&quot;Download&quot;</span><br><span class="line">          @click=&quot;handleExport&quot;</span><br><span class="line">          v-hasPermi=&quot;[&#x27;nursing:project:export&#x27;]&quot;</span><br><span class="line">        &gt;导出&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;right-toolbar v-model:showSearch=&quot;showSearch&quot; @queryTable=&quot;getList&quot;&gt;&lt;/right-toolbar&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;!-- 按钮区域 end --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 数据展示区域 start --&gt;</span><br><span class="line">    &lt;el-table v-loading=&quot;loading&quot; :data=&quot;projectList&quot; @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;编号&quot; align=&quot;center&quot; prop=&quot;id&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;名称&quot; align=&quot;center&quot; prop=&quot;name&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;排序号&quot; align=&quot;center&quot; prop=&quot;orderNo&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;单位&quot; align=&quot;center&quot; prop=&quot;unit&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;价格&quot; align=&quot;center&quot; prop=&quot;price&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;图片&quot; align=&quot;center&quot; prop=&quot;image&quot; width=&quot;100&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;image-preview :src=&quot;scope.row.image&quot; :width=&quot;50&quot; :height=&quot;50&quot;/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;护理要求&quot; align=&quot;center&quot; prop=&quot;nursingRequirement&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;状态&quot; align=&quot;center&quot; prop=&quot;status&quot; /&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;创建时间&quot; align=&quot;center&quot; prop=&quot;createTime&quot; width=&quot;180&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; parseTime(scope.row.createTime, &#x27;&#123;y&#125;-&#123;m&#125;-&#123;d&#125;&#x27;) &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button link type=&quot;primary&quot; icon=&quot;Edit&quot; @click=&quot;handleUpdate(scope.row)&quot; v-hasPermi=&quot;[&#x27;nursing:project:edit&#x27;]&quot;&gt;修改&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button link type=&quot;primary&quot; icon=&quot;Delete&quot; @click=&quot;handleDelete(scope.row)&quot; v-hasPermi=&quot;[&#x27;nursing:project:remove&#x27;]&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;!-- 数据展示区域 end --&gt;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &lt;!-- 分页组件 start --&gt;</span><br><span class="line">    &lt;pagination</span><br><span class="line">      v-show=&quot;total&gt;0&quot;</span><br><span class="line">      :total=&quot;total&quot;</span><br><span class="line">      v-model:page=&quot;queryParams.pageNum&quot;</span><br><span class="line">      v-model:limit=&quot;queryParams.pageSize&quot;</span><br><span class="line">      @pagination=&quot;getList&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 分页组件 end --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 新增或修改弹窗  start --&gt;</span><br><span class="line">    &lt;!-- 添加或修改护理项目对话框 --&gt;</span><br><span class="line">    &lt;el-dialog :title=&quot;title&quot; v-model=&quot;open&quot; width=&quot;500px&quot; append-to-body&gt;</span><br><span class="line">      &lt;el-form ref=&quot;projectRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;名称&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.name&quot; placeholder=&quot;请输入名称&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;排序号&quot; prop=&quot;orderNo&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.orderNo&quot; placeholder=&quot;请输入排序号&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;单位&quot; prop=&quot;unit&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.unit&quot; placeholder=&quot;请输入单位&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;价格&quot; prop=&quot;price&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.price&quot; placeholder=&quot;请输入价格&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;图片&quot; prop=&quot;image&quot;&gt;</span><br><span class="line">          &lt;image-upload v-model=&quot;form.image&quot;/&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;护理要求&quot; prop=&quot;nursingRequirement&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.nursingRequirement&quot; placeholder=&quot;请输入护理要求&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;template #footer&gt;</span><br><span class="line">        &lt;div class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button @click=&quot;cancel&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- 新增或修改弹窗  end --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup name=&quot;Project&quot;&gt;</span><br><span class="line">// 引入后端接口</span><br><span class="line">import &#123; listProject, getProject, delProject, addProject, updateProject &#125; from &quot;@/api/nursing/project&quot;;</span><br><span class="line">// 获取当前实例代理对象，用于访问组件的数据、方法等属性。</span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance();</span><br><span class="line"></span><br><span class="line">// 列表数据</span><br><span class="line">const projectList = ref([]);</span><br><span class="line">// 是否显示弹窗</span><br><span class="line">const open = ref(false);</span><br><span class="line">// 加载状态</span><br><span class="line">const loading = ref(true);</span><br><span class="line">// 是否显示搜索栏</span><br><span class="line">const showSearch = ref(true);</span><br><span class="line">//记录被选中的id集合</span><br><span class="line">const ids = ref([]);</span><br><span class="line">//是否是单选，用于是否高亮修改按钮</span><br><span class="line">const single = ref(true);</span><br><span class="line">//是否是多选，用于是否高亮删除按钮</span><br><span class="line">const multiple = ref(true);</span><br><span class="line">//总条数</span><br><span class="line">const total = ref(0);</span><br><span class="line">// 标题</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">  // 新增或修改表单数据</span><br><span class="line">  form: &#123;&#125;,</span><br><span class="line">  // 查询参数</span><br><span class="line">  queryParams: &#123;</span><br><span class="line">    pageNum: 1,</span><br><span class="line">    pageSize: 10,</span><br><span class="line">    name: null,</span><br><span class="line">    status: null,</span><br><span class="line">  &#125;,</span><br><span class="line">  // 表单校验</span><br><span class="line">  rules: &#123;</span><br><span class="line">    status: [</span><br><span class="line">      &#123; required: true, message: &quot;状态不能为空&quot;, trigger: &quot;change&quot; &#125;</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">//toRefs将传入的数据对象的特定属性转换为响应式对象</span><br><span class="line">const &#123; queryParams, form, rules &#125; = toRefs(data);</span><br><span class="line"></span><br><span class="line">/** 查询护理项目列表 */</span><br><span class="line">function getList() &#123;</span><br><span class="line">  loading.value = true;</span><br><span class="line">  listProject(queryParams.value).then(response =&gt; &#123;</span><br><span class="line">    projectList.value = response.rows;</span><br><span class="line">    total.value = response.total;</span><br><span class="line">    loading.value = false;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 取消按钮</span><br><span class="line">function cancel() &#123;</span><br><span class="line">  open.value = false;</span><br><span class="line">  reset();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 表单重置</span><br><span class="line">function reset() &#123;</span><br><span class="line">  form.value = &#123;</span><br><span class="line">    id: null,</span><br><span class="line">    name: null,</span><br><span class="line">    orderNo: null,</span><br><span class="line">    unit: null,</span><br><span class="line">    price: null,</span><br><span class="line">    image: null,</span><br><span class="line">    nursingRequirement: null,</span><br><span class="line">    status: null,</span><br><span class="line">    createBy: null,</span><br><span class="line">    updateBy: null,</span><br><span class="line">    remark: null,</span><br><span class="line">    createTime: null,</span><br><span class="line">    updateTime: null</span><br><span class="line">  &#125;;</span><br><span class="line">  proxy.resetForm(&quot;projectRef&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 搜索按钮操作 */</span><br><span class="line">function handleQuery() &#123;</span><br><span class="line">  queryParams.value.pageNum = 1;</span><br><span class="line">  getList();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 重置按钮操作 */</span><br><span class="line">function resetQuery() &#123;</span><br><span class="line">  proxy.resetForm(&quot;queryRef&quot;);</span><br><span class="line">  handleQuery();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 多选框选中数据</span><br><span class="line">function handleSelectionChange(selection) &#123;</span><br><span class="line">  ids.value = selection.map(item =&gt; item.id);</span><br><span class="line">  single.value = selection.length != 1;</span><br><span class="line">  multiple.value = !selection.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 新增按钮操作 */</span><br><span class="line">function handleAdd() &#123;</span><br><span class="line">  reset();</span><br><span class="line">  open.value = true;</span><br><span class="line">  title.value = &quot;添加护理项目&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 修改按钮操作 */</span><br><span class="line">function handleUpdate(row) &#123;</span><br><span class="line">  reset();</span><br><span class="line">  const _id = row.id || ids.value</span><br><span class="line">  getProject(_id).then(response =&gt; &#123;</span><br><span class="line">    form.value = response.data;</span><br><span class="line">    open.value = true;</span><br><span class="line">    title.value = &quot;修改护理项目&quot;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 提交按钮 */</span><br><span class="line">function submitForm() &#123;</span><br><span class="line">  proxy.$refs[&quot;projectRef&quot;].validate(valid =&gt; &#123;</span><br><span class="line">    if (valid) &#123;</span><br><span class="line">      if (form.value.id != null) &#123;</span><br><span class="line">        updateProject(form.value).then(response =&gt; &#123;</span><br><span class="line">          proxy.$modal.msgSuccess(&quot;修改成功&quot;);</span><br><span class="line">          open.value = false;</span><br><span class="line">          getList();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        addProject(form.value).then(response =&gt; &#123;</span><br><span class="line">          proxy.$modal.msgSuccess(&quot;新增成功&quot;);</span><br><span class="line">          open.value = false;</span><br><span class="line">          getList();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 删除按钮操作 */</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  const _ids = row.id || ids.value;</span><br><span class="line">  proxy.$modal.confirm(&#x27;是否确认删除护理项目编号为&quot;&#x27; + _ids + &#x27;&quot;的数据项？&#x27;).then(function() &#123;</span><br><span class="line">    return delProject(_ids);</span><br><span class="line">  &#125;).then(() =&gt; &#123;</span><br><span class="line">    getList();</span><br><span class="line">    proxy.$modal.msgSuccess(&quot;删除成功&quot;);</span><br><span class="line">  &#125;).catch(() =&gt; &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** 导出按钮操作 */</span><br><span class="line">function handleExport() &#123;</span><br><span class="line">  proxy.download(&#x27;nursing/project/export&#x27;, &#123;</span><br><span class="line">    ...queryParams.value</span><br><span class="line">  &#125;, `project_$&#123;new Date().getTime()&#125;.xlsx`)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getList();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="序号处理"><a href="#序号处理" class="headerlink" title="序号处理"></a>序号处理</h4><p>修改后的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 数据展示区域 start --&gt;</span><br><span class="line">    &lt;el-table v-loading=&quot;loading&quot; :data=&quot;projectList&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot; /&gt;  去除复选框 --&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;序号&quot; type=&quot;index&quot; align=&quot;center&quot; /&gt;</span><br><span class="line">      &lt;!-- 其他代码略 --&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">&lt;!-- 数据展示区域 end --&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>@selection-change=&quot;handleSelectionChange&quot;</code>可以把该方法删除，因为该方法是记录复选框选中的数据</p>
<p>页面中展示的是数据库表中的主键id，需要将其修改为表格的自然排序序号，加上<code>type=&quot;index&quot;</code>即可</p>
</blockquote>
<h4 id="时间展示处理"><a href="#时间展示处理" class="headerlink" title="时间展示处理"></a>时间展示处理</h4><p>修改后的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;创建时间&quot; align=&quot;center&quot; prop=&quot;createTime&quot; width=&quot;180&quot;&gt;</span><br><span class="line">   &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">     &lt;span&gt;&#123;&#123; parseTime(scope.row.createTime, &#x27;&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&#x27;) &#125;&#125;&lt;/span&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要将时分秒展示出来，可以在<code>&#123;y&#125;-&#123;m&#125;-&#123;d&#125;</code>后面加上<code>&#123;h&#125;:&#123;i&#125;:&#123;s&#125;</code></p>
</blockquote>
<h4 id="状态样式调整"><a href="#状态样式调整" class="headerlink" title="状态样式调整"></a>状态样式调整</h4><p>修改后的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;状态&quot; align=&quot;center&quot; &gt;</span><br><span class="line">  &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;el-tag :type=&quot;scope.row.status === 1 ? &#x27;success&#x27; : &#x27;danger&#x27;&quot;&gt;&#123;&#123; scope.row.status === 1 ? &#x27;启用&#x27; : &#x27;禁用&#x27; &#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改前，状态显示中都是数值表示（0或者1），而想要的效果是<strong>启用</strong>或<strong>禁用</strong></p>
<p>可以使用Vue的插槽语法对其进行逻辑判断</p>
</blockquote>
<h3 id="新增状态查询条件"><a href="#新增状态查询条件" class="headerlink" title="新增状态查询条件"></a>新增状态查询条件</h3><p>这里需要使用的是下拉选择的组件<code>&lt;el-select&gt;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 搜索表单  start --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;queryParams&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;queryRef&quot;</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;showSearch&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;68px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;queryParams.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入名称&quot;</span> <span class="attr">clearable</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;handleQuery&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;status&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;queryParams.status&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span> <span class="attr">clearable</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in options&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span> <span class="attr">:label</span>=<span class="string">&quot;item.label&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Search&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleQuery&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">icon</span>=<span class="string">&quot;Refresh&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;resetQuery&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">&lt;!-- 搜索表单 end --&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Project&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//下拉选择框的选择项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> options = <span class="title function_">ref</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">value</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">label</span>: <span class="string">&quot;启用&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">value</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">label</span>: <span class="string">&quot;停用&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="禁用功能开发"><a href="#禁用功能开发" class="headerlink" title="禁用功能开发"></a>禁用功能开发</h3><p>在目前的操作栏中，只有两个按钮，分别是<strong>修改</strong>和<strong>删除，</strong>参考这两个按钮，新增一个<strong>禁用</strong>按钮，并且需要给这个按钮绑定事件，方便提交数据到后端进行修改</p>
<blockquote>
<p>注意：无需新增后端的禁用接口，可直接使用<strong>修改</strong>接口</p>
</blockquote>
<ul>
<li>新增按钮：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 数据展示区域 start --&gt;</span><br><span class="line">&lt;el-table v-loading=&quot;loading&quot; :data=&quot;projectList&quot; @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line">  &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot; /&gt;</span><br><span class="line">  &lt;!-- 其他代码略... --&gt;</span><br><span class="line">  &lt;el-table-column label=&quot;操作&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot;&gt;</span><br><span class="line">    &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">      &lt;el-button link type=&quot;primary&quot; icon=&quot;Edit&quot; @click=&quot;handleUpdate(scope.row)&quot;</span><br><span class="line">        v-hasPermi=&quot;[&#x27;nursing:project:edit&#x27;]&quot;&gt;修改&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button link type=&quot;danger&quot; icon=&quot;Delete&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">        v-hasPermi=&quot;[&#x27;nursing:project:remove&#x27;]&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button link type=&quot;primary&quot; :icon=&quot;scope.row.status == 0 ? &#x27;Lock&#x27; : &#x27;Unlock&#x27;&quot; @click=&quot;handleEnable(scope.row)&quot; &gt;&#123;&#123; scope.row.status == 0 ? &#x27;启用&#x27; : &#x27;禁用&#x27; &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line">&lt;!-- 数据展示区域 end --&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>按钮中绑定方法handleEnable(scope.row)，调用后端接口</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 启用禁用按钮操作 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleEnable</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  <span class="comment">// 获取当前状态</span></span><br><span class="line">  <span class="keyword">const</span> status = row.<span class="property">status</span>;</span><br><span class="line">  <span class="comment">// 提示信息</span></span><br><span class="line">  <span class="keyword">const</span> msg = status === <span class="number">1</span> ? <span class="string">&#x27;禁用&#x27;</span> : <span class="string">&#x27;启用&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 构建参数</span></span><br><span class="line">  <span class="keyword">const</span> params = &#123;</span><br><span class="line">    <span class="attr">id</span>: row.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">status</span>: status === <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span></span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  proxy.<span class="property">$modal</span>.<span class="title function_">confirm</span>(<span class="string">`是否确认<span class="subst">$&#123;msg&#125;</span>该护理项目的数据项？`</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">updateProject</span>(params);</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">getList</span>();</span><br><span class="line">    proxy.<span class="property">$modal</span>.<span class="title function_">msgSuccess</span>(<span class="string">`<span class="subst">$&#123;msg&#125;</span>成功`</span>);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="数据字典"><a href="#数据字典" class="headerlink" title="数据字典"></a>数据字典</h2><p>字典管理用来维护字典类型的数据，例如：状态的启用、禁用；性别的男、女；订单的已下单、支付中、已完成；通常用在如下拉框、单选按钮、复选框、树选择中的数据中，方便系统管理员维护</p>
<p>主要功能包括：<strong>字典分类管理</strong>、<strong>字典数据管理</strong></p>
<blockquote>
<p>简单的理解：数据字典就是企业中对一些<strong>常量</strong>的统一管理</p>
</blockquote>
<p><img src="/img/loading.gif" data-original="/img/assests/f76b278c-0428-4b98-adcb-b9f69dfa37b7.png" alt="f76b278c-0428-4b98-adcb-b9f69dfa37b7"></p>
<p>每个字典类型，可能会有多个值，比如，下面是用户<strong>性别</strong>的字典数据：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/2dc9b7a3-8240-48c5-8ed9-13ee1081a14f.png" alt="2dc9b7a3-8240-48c5-8ed9-13ee1081a14f"></p>
<h3 id="数据字典的使用方式"><a href="#数据字典的使用方式" class="headerlink" title="数据字典的使用方式"></a>数据字典的使用方式</h3><p>在刚刚开发的护理项目中，状态下拉列表就可以使用数据字典来完成数据的展示，如下图</p>
<p><img src="/img/loading.gif" data-original="/img/assests/412abdc1-685f-4f0f-a359-84304eecbe88.png" alt="412abdc1-685f-4f0f-a359-84304eecbe88"></p>
<p>在展示查询条件状态的时候，有两个选项值，目前代码中是写死的内容，咱们定义了一个options，如果使用字典可以先定义护理项目的状态字典，然后在组件中引用字典数据即可。下面是详细的操作步骤：</p>
<ol>
<li>新增数据字典</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/d8327ee3-ed8f-4e02-9af0-c2644392821a.png" alt="d8327ee3-ed8f-4e02-9af0-c2644392821a"></p>
<ol start="2">
<li>新增字典数据</li>
</ol>
<p>选中字典类型，可以进入字典数据页面，对字典数据进行新增</p>
<p><img src="/img/loading.gif" data-original="/img/assests/f265d82a-5662-4932-b89b-471098b65b8c.png" alt="f265d82a-5662-4932-b89b-471098b65b8c"></p>
<ol start="3">
<li>新增字典数据，添加两条数据</li>
</ol>
<ul>
<li>启用 1</li>
<li>禁用 0</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/7daed82c-a32c-4254-9db9-4582769e0156.png" alt="7daed82c-a32c-4254-9db9-4582769e0156"></p>
<p>在护理项目的组件中引用字典并使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;queryParams&quot; ref=&quot;queryRef&quot; :inline=&quot;true&quot; v-show=&quot;showSearch&quot; label-width=&quot;68px&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;名称&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;queryParams.name&quot; placeholder=&quot;请输入名称&quot; clearable @keyup.enter=&quot;handleQuery&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;状态&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">        &lt;el-select v-model=&quot;queryParams.status&quot; placeholder=&quot;请选择&quot; clearable&gt;</span><br><span class="line">          &lt;el-option </span><br><span class="line">          v-for=&quot;item in nursing_project_status&quot; </span><br><span class="line">          :key=&quot;item.value&quot; </span><br><span class="line">          :label=&quot;item.label&quot; </span><br><span class="line">          :value=&quot;item.value&quot; /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">     </span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- 其他代码略 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup name=&quot;Project&quot;&gt;</span><br><span class="line">import &#123; listProject, getProject, delProject, addProject, updateProject &#125; from &quot;@/api/nursing/project&quot;;</span><br><span class="line"></span><br><span class="line">//获取当前组件的实例</span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance();</span><br><span class="line"></span><br><span class="line">//引用数据字典</span><br><span class="line">const &#123; nursing_project_status &#125; = proxy.useDict(&quot;nursing_project_status&quot;);</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">const options = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    value: 1,</span><br><span class="line">    label: &quot;启用&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: 0,</span><br><span class="line">    label: &quot;停用&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]) */</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>利用proxy获取字典数据，并用<code>nursing_project_status</code>接收，最后在下拉菜单中切换数据源</p>
<p>后续当对应的字典数据发生改变时，下拉菜单中的选项也会动态发生改变</p>
</blockquote>
<h2 id="改造新增护理项目弹窗"><a href="#改造新增护理项目弹窗" class="headerlink" title="改造新增护理项目弹窗"></a>改造新增护理项目弹窗</h2><p>目前若依框架给提供的新增或修改的弹窗效果如下：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/Snipaste_2025-08-31_20-42-00.png" alt="Snipaste_2025-08-31_20-42-00"></p>
<p>经过对比，需要修复的内容如下：</p>
<ul>
<li><strong>排序号</strong>和<strong>价格</strong>字段修改为数字输入框<ul>
<li>数字输入框  <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/input-number.html">https://element-plus.org/zh-CN/component/input-number.html</a></li>
</ul>
</li>
<li>新增一个状态字段，这个字段是一个单选框<ul>
<li>单选框  <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/component/radio.html">https://element-plus.org/zh-CN/component/radio.html</a></li>
</ul>
</li>
</ul>
<p>最终的代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加或修改护理项目对话框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;open&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">append-to-body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;projectRef&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入名称&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;排序号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;orderNo&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;form.orderNo&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:max</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;单位&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;unit&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.unit&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入单位&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;价格&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;form.price&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:min</span>=<span class="string">&quot;5&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:max</span>=<span class="string">&quot;100&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:step</span>=<span class="string">&quot;5&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;status&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;form.status&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-for</span>=<span class="string">&quot;dict in nursing_project_status&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;dict.value&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;dict.label&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;dict.value&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;图片&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;image&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image-upload</span> <span class="attr">v-model</span>=<span class="string">&quot;form.image&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;护理要求&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;nursingRequirement&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.nursingRequirement&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入护理要求&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitForm&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="修改数据状态不回显问题"><a href="#修改数据状态不回显问题" class="headerlink" title="修改数据状态不回显问题"></a>修改数据状态不回显问题</h2><p>修改护理项目的index组件，把状态改为字符串类型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 修改按钮操作 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleUpdate</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  <span class="title function_">reset</span>();</span><br><span class="line">  <span class="keyword">const</span> _id = row.<span class="property">id</span> || ids.<span class="property">value</span></span><br><span class="line">  <span class="title function_">getProject</span>(_id).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    form.<span class="property">value</span> = response.<span class="property">data</span>;</span><br><span class="line">    form.<span class="property">value</span>.<span class="property">status</span> = <span class="title class_">String</span>(form.<span class="property">value</span>.<span class="property">status</span>)</span><br><span class="line">    open.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">    title.<span class="property">value</span> = <span class="string">&quot;修改护理项目&quot;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="OSS集成"><a href="#OSS集成" class="headerlink" title="OSS集成"></a>OSS集成</h1><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>在若依框架目前的实现中，是把图片存储到了服务器本地的目录，通过服务进行访问，这样做存储的是比较省事，但是缺点也有很多：</p>
<ul>
<li><strong>硬件与网络要求</strong>：服务器通常需要高性能的硬件和稳定的网络环境，以保证文件传输的效率和稳定性。这可能会增加硬件和网络资源的成本和维护难度。</li>
<li><strong>管理难度</strong>：服务器目录需要管理员进行配置和管理，包括权限设置、备份策略等。如果管理不善或配置不当，可能会引发一些安全问题和性能问题。</li>
<li><strong>性能瓶颈</strong>：如果服务器处理能力不足或网络带宽不够，可能会导致性能瓶颈，影响文件上传、下载和访问的速度。</li>
<li><strong>单点故障风险</strong>：服务器故障可能导致所有存储在其上的文件无法访问，尽管可以通过备份和冗余措施来降低这种风险，但单点故障的风险仍然存在。</li>
</ul>
<p>基于以上原因，企业中很多的文件都会存储到OSS中，OSS可以解决以上所有的问题，并且成本也不高，下面咱们就把阿里的OSS集成到若依项目中</p>
<p>目前使用的是<strong>若依提供的方案</strong>，对应的代码如下：</p>
<p>位置：zzyl-admin模块下，<code>com.zzyl.web.controller.common.CommonController.uploadFile</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用上传请求（单个）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> AjaxResult <span class="title function_">uploadFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> Exception</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 上传文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> RuoYiConfig.getUploadPath();</span><br><span class="line">        <span class="comment">// 上传并返回新文件名称，保存到本地的目录中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> FileUploadUtils.upload(filePath, file);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> nursingrConfig.getUrl() + fileName;</span><br><span class="line">        <span class="type">AjaxResult</span> <span class="variable">ajax</span> <span class="operator">=</span> AjaxResult.success();</span><br><span class="line">        ajax.put(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">        ajax.put(<span class="string">&quot;fileName&quot;</span>, fileName);</span><br><span class="line">        ajax.put(<span class="string">&quot;newFileName&quot;</span>, FileUtils.getName(fileName));</span><br><span class="line">        ajax.put(<span class="string">&quot;originalFilename&quot;</span>, file.getOriginalFilename());</span><br><span class="line">        <span class="keyword">return</span> ajax;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.error(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="创建OSS模块"><a href="#创建OSS模块" class="headerlink" title="创建OSS模块"></a>创建OSS模块</h2><h3 id="方案说明"><a href="#方案说明" class="headerlink" title="方案说明"></a>方案说明</h3><ul>
<li>方案一：把它集成到zzyl-framework模块中</li>
<li>方案二：单独创建一个模块，专门来管理OSS（推荐使用）<ul>
<li>好处：可以实现模块化、解耦、复用和依赖管理，提高开发效率和代码质量</li>
</ul>
</li>
</ul>
<h3 id="集成步骤"><a href="#集成步骤" class="headerlink" title="集成步骤"></a>集成步骤</h3><ol>
<li>在父工程中创建子模块为：zzyl-oss，如下图所示</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/bfe6dc76-f737-4800-9cdc-7e1b3f6063e5.png" alt="bfe6dc76-f737-4800-9cdc-7e1b3f6063e5"></p>
<ol start="2">
<li>在父工程的pom文件中引入oss的依赖管理</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>zzyl<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.ruoyi.vip<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>中州养老后台管理系统<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun.sdk.oss</span>&gt;</span>3.17.4<span class="tag">&lt;/<span class="name">aliyun.sdk.oss</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 依赖声明 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 其他依赖省略... --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.sdk.oss&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在zzyl-oss模块中引入新的依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建oss配置类及客户端</li>
</ol>
<p><img src="/img/loading.gif" data-original="/img/assests/0dea16b7-09f5-45be-9d46-834dd147937d.png" alt="0dea16b7-09f5-45be-9d46-834dd147937d"></p>
<ul>
<li>AliyunOSSProperties：配置类，读取aliyun.oss为前缀的属性值（桶名称，域名站点）</li>
<li>AliyunOSSOperator：通过OSSClient对oss进行交互，提供了<strong>上传</strong>和<strong>删除</strong>两个方法</li>
</ul>
<ol start="5">
<li>zzyl-admin模块引入并配置</li>
</ol>
<p>先把zzyl-oss模块注册到父工程中，在zzyl父工程的pom文件添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 依赖声明 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 其他依赖配置省略...--&gt;</span></span><br><span class="line">       </span><br><span class="line">        <span class="comment">&lt;!-- OSS模块 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;zzyl.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在zzyl-admin模块中引入zzyl-oss：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zzyl-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在application.yml文件中添加对oss的配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 阿里云OSS相关配置</span></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">...</span></span><br><span class="line">    <span class="attr">bucketName:</span> <span class="string">...</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong><font color='red'>修改上传的接口</font></strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> AliyunOSSOperator aliyunOSSOperator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用上传请求（单个）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> AjaxResult <span class="title function_">uploadFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> Exception</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 上传文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> RuoYiConfig.getUploadPath();</span><br><span class="line">        <span class="comment">// 上传并返回新文件名称</span></span><br><span class="line"><span class="comment">//            String fileName = FileUploadUtils.upload(filePath, file);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> aliyunOSSOperator.upload(file.getBytes(), file.getOriginalFilename());</span><br><span class="line"></span><br><span class="line"><span class="comment">//            String url = serverConfig.getUrl() + fileName;</span></span><br><span class="line">        <span class="type">AjaxResult</span> <span class="variable">ajax</span> <span class="operator">=</span> AjaxResult.success();</span><br><span class="line">        ajax.put(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">        ajax.put(<span class="string">&quot;fileName&quot;</span>, url);</span><br><span class="line">        ajax.put(<span class="string">&quot;newFileName&quot;</span>, FileUtils.getName(url));</span><br><span class="line">        ajax.put(<span class="string">&quot;originalFilename&quot;</span>, file.getOriginalFilename());</span><br><span class="line">        <span class="keyword">return</span> ajax;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.error(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="阅读文件上传相关的前端代码"><a href="#阅读文件上传相关的前端代码" class="headerlink" title="阅读文件上传相关的前端代码"></a>阅读文件上传相关的前端代码</h2><ul>
<li>文件位置：<code>src/components/imageUpload/index.vue</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> props.<span class="property">modelValue</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (val) &#123;</span><br><span class="line">    <span class="comment">// 首先将值转为数组</span></span><br><span class="line">    <span class="keyword">const</span> list = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(val) ? val : props.<span class="property">modelValue</span>.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">    <span class="comment">// 然后将数组转为对象数组</span></span><br><span class="line">    fileList.<span class="property">value</span> = list.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="title function_">indexOf</span>(baseUrl) === -<span class="number">1</span> &amp;&amp; !<span class="title function_">isExternal</span>(item)) &#123;</span><br><span class="line">          item = &#123; <span class="attr">name</span>: baseUrl + item, <span class="attr">url</span>: baseUrl + item &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          item = &#123; <span class="attr">name</span>: item, <span class="attr">url</span>: item &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> item</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fileList.<span class="property">value</span> = []</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,&#123; <span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">true</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>baseUrl的定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">baseUrl</span> <span class="operator">=</span> <span class="keyword">import</span>.meta.env.VITE_APP_BASE_API</span><br></pre></td></tr></table></figure>

<p>在测试环境下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 若依管理系统/开发环境</span><br><span class="line">VITE_APP_BASE_API = <span class="string">&#x27;/dev-api&#x27;</span></span><br></pre></td></tr></table></figure>

<p>测试是否能上传图片并展示:</p>
<p><img src="/img/loading.gif" data-original="/img/assests/ab4918a3-3d95-4167-ac7e-f6891a9d16f3.png" alt="ab4918a3-3d95-4167-ac7e-f6891a9d16f3"></p>
<h1 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h1><p>在入住办理模块中，在页面上发起入住申请并提交表单到后台，后台需要保存合同信息，而如果老人选择的入住开始时间在签约办理时的当前时间之后，合同状态会保存一个0：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增签约办理</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> elder 老人信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> contractNo 合同编号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> checkInApplyDto 入住申请信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insertContract</span><span class="params">(Elder elder, String contractNo, CheckInApplyDto checkInApplyDto)</span> &#123;</span><br><span class="line">    <span class="type">Contract</span> <span class="variable">contract</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contract</span>();</span><br><span class="line">    <span class="comment">// 属性拷贝</span></span><br><span class="line">    BeanUtils.copyProperties(checkInApplyDto.getCheckInContractDto(), contract);</span><br><span class="line">    contract.setContractNumber(contractNo);</span><br><span class="line">    contract.setElderId(elder.getId());</span><br><span class="line">    contract.setElderName(elder.getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取入住开始时间和入住结束时间</span></span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">startDate</span> <span class="operator">=</span> checkInApplyDto.getCheckInConfigDto().getStartDate();</span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">endDate</span> <span class="operator">=</span> checkInApplyDto.getCheckInConfigDto().getEndDate();</span><br><span class="line">    contract.setStartDate(startDate);</span><br><span class="line">    contract.setEndDate(endDate);</span><br><span class="line">    <span class="type">int</span> <span class="variable">status</span> <span class="operator">=</span> startDate.isAfter(LocalDateTime.now()) ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    contract.setStatus(status);</span><br><span class="line">    contractMapper.insert(contract);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而实际的业务场景是：随着时间的推移，如果当前时间超过了入住开始时间，就要将合同状态更新为已生效，这个需求可以借助定时任务来实现</p>
<h2 id="定时任务概述"><a href="#定时任务概述" class="headerlink" title="定时任务概述"></a><strong>定时任务概述</strong></h2><p><strong>定时任务（也叫任务调度）</strong>是指系统为了自动完成特定任务，在约定的特定时刻去执行任务的过程。有了定时任务即可解放更多的人力，而是**<font color='red'>由系统自动去执行任务</font>**</p>
<p>常用业务场景案例：</p>
<ul>
<li>某电商系统需要在每天上午10点，下午4点，晚上8点发放一批优惠券</li>
<li>某银行系统需要在信用卡到期还款日的前三天进行短信提醒</li>
<li>某财务系统需要在每天凌晨0:10结算前一天的财务数据，统计汇总</li>
<li>12306会根据收票车站的不同，设置某几个时间点进行分批放票</li>
</ul>
<p>如何实现任务调度：</p>
<ul>
<li>多线程方式，结合sleep</li>
<li>JDK提供的API，例如：Timer、ScheduledExecutor</li>
<li>框架，例如Quartz，它是一个功能强大的任务调度框架，可以满足更多更复杂的调度需求，还有一些其他的，比如：XXL-JOB，DolphinScheduler</li>
<li><strong>SpringTask</strong></li>
</ul>
<h2 id="cron表达式"><a href="#cron表达式" class="headerlink" title="cron表达式"></a>cron表达式</h2><p>在我们使用调度任务技术的时候，特别是调度框架，里面都支持使用日历的方式来设置任务制定的时间、频率等，通常情况下都会使用<strong>cron表达式</strong>来表达</p>
<p>cron表达式是一个字符串, 用来设置定时规则, <font color='red'>由七部分组成, 每部分中间用空格隔开</font>, 每部分的含义如下表所示:</p>
<table>
<thead>
<tr>
<th>组成部分</th>
<th>含义</th>
<th>取值范围</th>
</tr>
</thead>
<tbody><tr>
<td>第一部分</td>
<td>Seconds (秒)</td>
<td>0－59</td>
</tr>
<tr>
<td>第二部分</td>
<td>Minutes(分)</td>
<td>0－59</td>
</tr>
<tr>
<td>第三部分</td>
<td>Hours(时)</td>
<td>0-23</td>
</tr>
<tr>
<td>第四部分</td>
<td>Day-of-Month(日)</td>
<td>1月31日</td>
</tr>
<tr>
<td>第五部分</td>
<td>Month(月)</td>
<td>0-11或JAN-DEC</td>
</tr>
<tr>
<td>第六部分</td>
<td>Day-of-Week(星期)</td>
<td>1-7(1表示星期日)或SUN-SAT</td>
</tr>
<tr>
<td>第七部分</td>
<td>Year(年) 可选</td>
<td>1970-2099</td>
</tr>
</tbody></table>
<p>另外, cron表达式还可以包含一些特殊符号来设置更加灵活的定时规则, 如下表所示:</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>?</td>
<td>表示不确定的值。当两个子表达式其中一个被指定了值以后，为了避免冲突，需要将另外一个的值设为 “?” 。例如：想在每月20日触发调度，不管20号是星期几，只能用如下写法：0 0 0 20 * ?，其中最后以为只能用“?”</td>
</tr>
<tr>
<td>*</td>
<td>代表所有可能的值</td>
</tr>
<tr>
<td>,</td>
<td>设置多个值,例如”26,29,33”表示在26分,29分和33分各自运行一次任务</td>
</tr>
<tr>
<td>-</td>
<td>设置取值范围,例如”5-20”，表示从5分到20分钟每分钟运行一次任务</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>设置频率或间隔,如”1&#x2F;15”表示从1分开始,每隔15分钟运行一次任务</td>
</tr>
<tr>
<td>L</td>
<td>用于每月，或每周，表示每月的最后一天，或每个月的最后星期几,例如”6L”表示”每月的最后一个星期五”</td>
</tr>
<tr>
<td>W</td>
<td>表示离给定日期最近的工作日,例如”15W”放在每月（day-of-month）上表示”离本月15日最近的工作日”</td>
</tr>
<tr>
<td>#</td>
<td>表示该月第几个周X。例如”6#3”表示该月第3个周五</td>
</tr>
</tbody></table>
<p>为了让大家更熟悉cron表达式的用法, 接下来我们给大家列举了一些例子, 如下表所示:</p>
<table>
<thead>
<tr>
<th>cron表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>*&#x2F;5 * * * * ?</td>
<td>每隔5秒运行一次任务</td>
</tr>
<tr>
<td>0 0 23 * * ?</td>
<td>每天23点运行一次任务</td>
</tr>
<tr>
<td>0 0 1 1 * ?</td>
<td>每月1号凌晨1点运行一次任务</td>
</tr>
<tr>
<td>0 0 23 L * ?</td>
<td>每月最后一天23点运行一次任务</td>
</tr>
<tr>
<td>0 26,29,33 * * * ?</td>
<td>在26分、29分、33分运行一次任务</td>
</tr>
<tr>
<td>0 0&#x2F;30 9-17 * * ?</td>
<td>朝九晚五工作时间内每半小时运行一次任务</td>
</tr>
<tr>
<td>0 15 10 ? * 6#3</td>
<td>每月的第三个星期五上午10:15运行一次任务</td>
</tr>
</tbody></table>
<h2 id="SpringTask入门案例"><a href="#SpringTask入门案例" class="headerlink" title="SpringTask入门案例"></a>SpringTask入门案例</h2><ol>
<li>导入maven依赖 spring-context<ul>
<li>项目中只要导入了springboot，相关依赖会自动导入，这一步无需操作</li>
</ul>
</li>
<li>自定义定时任务类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.task;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> alexis</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTask</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定时任务 每隔5秒触发一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0/5 * * * * ?&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">executeTask</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;定时任务开始执行：&#123;&#125;&quot;</span>, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>启动类添加注解 @EnableScheduling</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZzylApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      SpringApplication.run(ZzylApplication.class, args);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="若依中定时任务的使用"><a href="#若依中定时任务的使用" class="headerlink" title="若依中定时任务的使用"></a>若依中定时任务的使用</h2><p>在若依框架中，也提供了定时任务相关的功能，并且做到了<strong>可视化管理</strong>，方便来管理和维护项目中的定时任务。</p>
<p>在使用若依提供的定时任务的时候，需要后端代码和后台系统协作才能更好的管理定时任务</p>
<h3 id="编写后端代码"><a href="#编写后端代码" class="headerlink" title="编写后端代码"></a>编写后端代码</h3><p>自定义任务类，在<code>zzyl-nursing-platform</code>模块下的<code>com.zzyl.nursing.task</code>包下新增HelloTask类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyl.nursing.task;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;helloTask&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloTask</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;helloTask&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="在系统中创建任务"><a href="#在系统中创建任务" class="headerlink" title="在系统中创建任务"></a>在系统中创建任务</h3><p>找到<strong>系统监控</strong>–&gt;<strong>定时任务，</strong>可以新增任务，如下：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/b9f77752-557b-4a72-a83a-a7a321ec4e33.png" alt="b9f77752-557b-4a72-a83a-a7a321ec4e33"></p>
<ul>
<li>任务名称：自定义，如：定时查询任务状态</li>
<li>任务分组：根据字典<code>sys_job_group</code>配置，可自行进行配置</li>
<li>调用方法：设置后台任务方法名称参数</li>
<li>cron表达式：可查询官方<code>cron</code>表达式介绍</li>
<li>执行策略：定时任务自定义执行策略</li>
<li>是否并发：是否需要多个任务间同时执行</li>
</ul>
<blockquote>
<p>默认情况下，任务类只能定义在<code>zzyl-quartz</code>模块下的<code>com.zzyl.quartz.task</code>包下，因为项目中做了白名单的设置，不然任务会创建失败，也可以修改白名单的设置：</p>
<p>在zzyl-common模块中，找到com.zzyl.common.constant.Constants常量类</p>
<p>修改常量 JOB_WHITELIST_STR ，这是一个数组，可以添加任意的任务类包名 public static final String[] <em>JOB_WHITELIST_STR</em> &#x3D; { “com.zzyl.quartz.task”,  “com.zzyl.nursing.task” };</p>
</blockquote>
<p>创建完成后，在定时任务列表页可以对任务进行操作</p>
<p><img src="/img/loading.gif" data-original="/img/assests/39136a55-f090-431b-ba0a-57a1fd6e9613.png" alt="39136a55-f090-431b-ba0a-57a1fd6e9613"></p>
<blockquote>
<p>可以对任务进行：状态开启、修改、删除、查看详情、任务调度日志</p>
</blockquote>
<h3 id="定时更新合同状态"><a href="#定时更新合同状态" class="headerlink" title="定时更新合同状态"></a>定时更新合同状态</h3><ol>
<li>批量更新合同状态执行逻辑</li>
</ol>
<p>在IContractService中新增方法，没有参数，来批量更新合同状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新合同状态</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateContractStatus</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>实现方法：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新合同状态</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateContractStatus</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.查询状态为0的合同  &amp;&amp; 合同开始时间小于等于当前时间</span></span><br><span class="line">    List&lt;Contract&gt; list = list(Wrappers.&lt;Contract&gt;lambdaQuery()</span><br><span class="line">            .eq(Contract::getStatus, <span class="number">0</span>)</span><br><span class="line">            .le(Contract::getStartDate, LocalDateTime.now())</span><br><span class="line">            .ge(Contract::getEndDate, LocalDateTime.now()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.修改状态为1</span></span><br><span class="line">    list.forEach(item -&gt; &#123;</span><br><span class="line">        item.setStatus(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.批量更新</span></span><br><span class="line">    updateBatchById(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h1><p>用户在前端页面点击发起入住申请或者查看详情，会进入到入住详情页面，下图是需要用入住详情页面的前端效果图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/c4a6b1cb-b36e-47af-9550-66c19fd5ffd1.png" alt="c4a6b1cb-b36e-47af-9550-66c19fd5ffd1"></p>
<p>从效果图上可以看出来，这个页面共分为了四部分</p>
<ul>
<li>基本信息</li>
<li>家属信息，可能会有多个</li>
<li>入住配置</li>
<li>签约办理</li>
</ul>
<p>由于表单内容较多，如果把代码都写在一起，维护起来非常麻烦，一般企业中会抽取组件进行开发，最后抽取出来的组件需要父组件之间进行通信</p>
<h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><p>整体的组件设计思路如下：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B63.png" alt="若依框架3.png"></p>
<ul>
<li>在入住列表页面index.vue点击按钮发起入住申请或者点击查看按钮，都会进入到details.vue详情页，由于details.vue中的内容过多，因此将其拆分成4个单独的页面，然后在details.vue中统一引入，最终前端效果如下：</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/73af3b86-82e5-4bc8-927c-efabd442b632.png" alt="73af3b86-82e5-4bc8-927c-efabd442b632"></p>
<ul>
<li>其中details.vue是父组件，components目录下的四个组件是子组件，最终四个子组件表单中的数据需要统一收集到父组件中，因此这里就涉及到了组件之间的通信<ul>
<li>父组件引用子组件</li>
<li>子组件传数据到父组件</li>
</ul>
</li>
</ul>
<h2 id="父子组件通信-1"><a href="#父子组件通信-1" class="headerlink" title="父子组件通信"></a>父子组件通信</h2><p>先来通过下面这张图片认识一下什么是父子组件，图中有三个组件，组件A的子组件是B和C，其中B和C是兄弟关系。重点研究父子组件的通信，如果想要实现B和C的通信，需要使用第三方组件pinia才行</p>
<p><img src="/img/loading.gif" data-original="/img/assests/3419f4b2-f2ae-41ee-824a-b17dbd2231dd.png" alt="3419f4b2-f2ae-41ee-824a-b17dbd2231dd"></p>
<p>在 Vue中，父子组件间的通信是通过属性传递（props）和事件（events）的方式来进行的。</p>
<h3 id="父组件向子组件传递数据"><a href="#父组件向子组件传递数据" class="headerlink" title="父组件向子组件传递数据"></a>父组件向子组件传递数据</h3><p>父组件向子组件传递数据通常是通过 props 来实现的。在 Vue 3 中，props 的定义和使用变得更加简洁</p>
<p><strong>示例代码：</strong></p>
<ol>
<li>父组件(parent.vue)传递数据：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">:message</span>=<span class="string">&quot;parentMessage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&#x27;./child.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> parentMessage = <span class="string">&#x27;来自父组件的消息&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，父组件通过 <code>message</code> 属性将数据传递给子组件 <code>ChildComponent</code></p>
<ol start="2">
<li>子组件(child.vue)接收数据：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">defineProps</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">message</span>: <span class="title class_">String</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>子组件通过 <code>defineProps</code> 钩子来声明它期望接收的 prop，并且在模板中使用这个 prop</p>
<h3 id="子组件向父组件传递数据"><a href="#子组件向父组件传递数据" class="headerlink" title="子组件向父组件传递数据"></a>子组件向父组件传递数据</h3><p>子组件向父组件传递数据通常是通过自定义事件来实现的。</p>
<p>示例代码：</p>
<ol>
<li>子组件(child.vue)触发事件：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendMessage&quot;</span>&gt;</span>给父组件发消息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;message-sent&#x27;</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">sendMessage</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">emit</span>(<span class="string">&#x27;message-sent&#x27;</span>, <span class="string">&#x27;来自子组件的消息&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，子组件定义了一个自定义事件 <code>message-sent</code>，并在按钮点击时触发这个事件，并传递一个消息。</p>
<ol start="2">
<li>父组件(parent.vue)监听事件：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">child</span> @<span class="attr">message-sent</span>=<span class="string">&quot;handleMessage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&#x27;./child.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">handleMessage</span>(<span class="params">message</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;接收到了子组件的消息:&#x27;</span>, message);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>父组件通过 <code>@message-sent</code> 监听子组件触发的事件，并定义了一个处理函数 <code>handleMessage</code> 来接收和处理子组件传递过来的消息。</p>
<h1 id="表单构建"><a href="#表单构建" class="headerlink" title="表单构建"></a>表单构建</h1><h2 id="表单构建功能说明"><a href="#表单构建功能说明" class="headerlink" title="表单构建功能说明"></a>表单构建功能说明</h2><p>打开菜单中的<strong>系统工具</strong>–&gt;<strong>表单构建</strong></p>
<p><img src="/img/loading.gif" data-original="/img/assests/44f0780d-4c01-4506-a37e-bd279923da47.png" alt="44f0780d-4c01-4506-a37e-bd279923da47"></p>
<p>使用<strong>表单构建</strong>的优点：</p>
<ul>
<li><strong>可视化操作与配置</strong>：表单构建功能提供了直观的可视化界面，开发者无需编写繁琐的代码，即可通过拖拽、配置等方式快速构建表单。这大大降低了开发难度，提高了开发效率。</li>
<li><strong>高度自定义</strong>：若依框架支持丰富的表单字段类型，如文本框、下拉框、单选框、复选框等，并允许开发者根据需求自定义字段类型。同时，框架还提供了灵活的布局和样式设置，使得开发者能够构建出符合业务需求的个性化表单</li>
<li><strong>数据校验与验证</strong>：表单构建功能内置了强大的数据校验和验证机制，能够确保表单数据的准确性和完整性。开发者可以为表单字段设置校验规则，如必填项、格式验证等，从而在用户提交表单时自动进行校验，减少错误数据的产生。</li>
<li><strong>多类型导出：</strong>可根据业务情况，选择生成页面组件或者是弹窗组件</li>
</ul>
<h2 id="基本信息组件"><a href="#基本信息组件" class="headerlink" title="基本信息组件"></a>基本信息组件</h2><p>以<strong>基本信息组件</strong>为例，演示一下怎样使用若依提供的表单构建功能。</p>
<p>效果图：</p>
<p><img src="/img/loading.gif" data-original="/img/assests/126eaa2b-4a95-4988-8fee-f40b65f3803f.png" alt="126eaa2b-4a95-4988-8fee-f40b65f3803f"></p>
<p>基于上图，我们可以使用<strong>表单生成</strong>来生成代码，每个组件的属性值可参考接口文档</p>
<table>
<thead>
<tr>
<th><strong>字段描述</strong></th>
<th><strong>字段名</strong></th>
<th><strong>所用组件</strong></th>
</tr>
</thead>
<tbody><tr>
<td>老人姓名</td>
<td>name</td>
<td>单行文本</td>
</tr>
<tr>
<td>身份证号</td>
<td>idCardNo</td>
<td>单行文本</td>
</tr>
<tr>
<td>出生日期</td>
<td>birthday</td>
<td>日期选择</td>
</tr>
<tr>
<td>年龄</td>
<td>age</td>
<td>单行文本</td>
</tr>
<tr>
<td>性别</td>
<td>sex</td>
<td>单选框组</td>
</tr>
<tr>
<td>联系方式</td>
<td>phone</td>
<td>单行文本</td>
</tr>
<tr>
<td>家庭住址</td>
<td>address</td>
<td>多行文本</td>
</tr>
<tr>
<td>一寸照片</td>
<td>image</td>
<td>上传</td>
</tr>
<tr>
<td>身份证人像面</td>
<td>idCardPortraitImg</td>
<td>上传</td>
</tr>
<tr>
<td>身份证国徽面</td>
<td>idCardNationalEmblemImg</td>
<td>上传</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>相同颜色的字段为一组，它们属于一行，用到了<strong>行容器</strong>组件</li>
<li>字段名称可以参考接口文档或者elder表结构的字段名称</li>
</ul>
</blockquote>
<p>选择组件的效果如下图，只展示了部分</p>
<p><img src="/img/loading.gif" data-original="/img/assests/6ba94124-0011-4df5-8528-f7691024c3fa.png" alt="6ba94124-0011-4df5-8528-f7691024c3fa"></p>
<p>表单构建完成以后，找到<strong>导出vue文件</strong>，生成类型选择<strong>页面</strong>，把文件下载到本地备用</p>
<p><img src="/img/loading.gif" data-original="/img/assests/e1551087-8e4d-4117-9670-8856bbd3f5e3.png" alt="e1551087-8e4d-4117-9670-8856bbd3f5e3"></p>
<h1 id="若依中的缓存使用"><a href="#若依中的缓存使用" class="headerlink" title="若依中的缓存使用"></a>若依中的缓存使用</h1><p>在目前的若依框架中，是使用Redis来作为缓存的，核心配置类如下：</p>
<ul>
<li>在zzyl-framework模块中的com.zzyl.framework.config.RedisConfig类<ul>
<li>作用：配置类，开启了缓存注解、对象序列化和反序列化</li>
</ul>
</li>
</ul>
<blockquote>
<p>对象序列化是将对象转换为可存储或传输的字节序列的过程，这种序列化后的字节序列可以保存在文件，数据库或通过网络进行传输，将来需要用到对象时可以获取到序列化之后的结果，再反序列化为对象</p>
<p><img src="/img/loading.gif" data-original="/img/assests/d61dd50a-cc22-47c6-83d2-b1b89b6a1185.png" alt="d61dd50a-cc22-47c6-83d2-b1b89b6a1185"></p>
<p>想要实现序列化的类，必须实现<strong>Serializable</strong>接口</p>
<p>若依框架在RedisConfig中提供了序列化器和反序列化器，所以即使创建的类没有实现<code>Serializable</code>接口也可以保存到Redis中</p>
</blockquote>
<ul>
<li>在com.zzyl.common.core.redis.RedisCache<ul>
<li>封装了常见的操作Redis的方法，在业务开发中，可以直接使用这个类的方法来操作Redis</li>
</ul>
</li>
</ul>
<p><img src="/img/loading.gif" data-original="/img/assests/27770dbc-dd83-46c7-a602-be1e16ca3165.png" alt="27770dbc-dd83-46c7-a602-be1e16ca3165"></p>
<h2 id="功能接口添加缓存"><a href="#功能接口添加缓存" class="headerlink" title="功能接口添加缓存"></a>功能接口添加缓存</h2><h3 id="哪些数据需要添加放到缓存中"><a href="#哪些数据需要添加放到缓存中" class="headerlink" title="哪些数据需要添加放到缓存中"></a>哪些数据需要添加放到缓存中</h3><ul>
<li><strong>高频访问且变更较少的数据</strong>：用户信息（基本资料、权限）、配置信息（系统配置、业务规则等）</li>
<li><strong>数据库查询结果</strong>：复杂的数据库查询（多表或量大且需要经常访问）</li>
<li><strong>热门内容</strong>：热门文章、热门视频、热门评论等，访问量高的数据</li>
<li><strong>临时数据</strong>：临时存储一些数据以便后续使用（如验证码、临时文件路径等），在内存中以便快速访问</li>
<li><strong>需要快速访问的小数据集</strong>：某些情况下，即使数据不大，但如果需要频繁访问，可以考虑将其缓存起来以提高性能</li>
</ul>
<h3 id="缓存使用策略"><a href="#缓存使用策略" class="headerlink" title="缓存使用策略"></a>缓存使用策略</h3><h4 id="添加缓存的思路"><a href="#添加缓存的思路" class="headerlink" title="添加缓存的思路"></a>添加缓存的思路</h4><p>基本的流程如下图：</p>
<img src="/img/loading.gif" data-original="/img/assests/whiteboard_exported_image (13).png" alt="whiteboard_exported_image (13)" style="zoom:50%;" />



<h4 id="数据同步思路"><a href="#数据同步思路" class="headerlink" title="数据同步思路"></a>数据同步思路</h4><ul>
<li><strong>先更新数据库，再删除缓存</strong>：这是<strong>最</strong>常用的策略之一。当数据更新时，首先更新数据库，然后删除缓存中的旧数据。这样，下次请求时缓存会重新从数据库中加载最新数据。这种方法避免了缓存和数据库之间的数据竞争，但需要注意删除缓存操作的成功性</li>
</ul>
<img src="/img/loading.gif" data-original="/img/assests/whiteboard_exported_image (14).png" alt="whiteboard_exported_image (14)" style="zoom:50%;" />

<ul>
<li><strong>设置缓存过期时间</strong>（不推荐）：为缓存设置合理的过期时间，到期后缓存数据自动失效，从而触发从数据库中重新加载数据。这种方法适用于<strong>对数据一致性要求不是非常严格</strong>，但希望减少数据库访问压力的场景</li>
</ul>
<blockquote>
<p>相关案例查看中州养老-入住办理接口</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Zhao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://norlcyan.netlify.app">https://norlcyan.netlify.app</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Norlcyan's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF/">后端</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0/">低代码平台</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/archives/65b69107.html" title="Nginx"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="title">Nginx</div></div></a></div><div><a href="/archives/2040d45d.html" title="Canal"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-16</div><div class="title">Canal</div></div></a></div><div><a href="/archives/d48132d3.html" title="ElasticSearch"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-16</div><div class="title">ElasticSearch</div></div></a></div><div><a href="/archives/8aee090c.html" title="接入华为云IOT平台"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="title">接入华为云IOT平台</div></div></a></div><div><a href="/archives/8fe47ff4.html" title="JDBC"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="title">JDBC</div></div></a></div><div><a href="/archives/9e299c6e.html" title="MySQL数据库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="title">MySQL数据库</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Zhao</div><div class="author-info__description">人生最遗憾的，莫过于，轻易地放弃了不该放弃的，固执地，坚持了不该坚持的。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">142</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Noober-jpg"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如有侵权文章，可以加我QQ：3481765114通知我</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">什么使用若依框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8B%A5%E4%BE%9D%E6%A1%86%E6%9E%B6%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">若依框架基本介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RuoYi-Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">3.</span> <span class="toc-text">RuoYi-Vue快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">技术选型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">3.2.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.3.</span> <span class="toc-text">运行后端项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E5%90%8D%E5%85%A8%E5%B1%80%E6%9B%BF%E6%8D%A2"><span class="toc-number">3.3.1.</span> <span class="toc-text">包名全局替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.3.2.</span> <span class="toc-text">项目初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0Gitee"><span class="toc-number">3.3.3.</span> <span class="toc-text">后端项目上传到Gitee</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.4.</span> <span class="toc-text">运行前端项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0gitee"><span class="toc-number">3.4.1.</span> <span class="toc-text">将前端项目上传到gitee</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.5.</span> <span class="toc-text">前后端项目结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">3.5.1.</span> <span class="toc-text">后端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">代码结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">3.5.1.2.</span> <span class="toc-text">项目中的配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">3.5.1.3.</span> <span class="toc-text">表结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">3.5.2.</span> <span class="toc-text">前端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84-1"><span class="toc-number">3.5.2.1.</span> <span class="toc-text">代码结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="toc-number">3.5.2.2.</span> <span class="toc-text">核心配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91"><span class="toc-number">3.6.</span> <span class="toc-text">功能快速开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-1"><span class="toc-number">3.6.1.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8F%9C%E5%8D%95"><span class="toc-number">3.6.1.1.</span> <span class="toc-text">菜单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%BB%93%E6%9E%84-1"><span class="toc-number">3.6.1.2.</span> <span class="toc-text">表结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">3.6.2.</span> <span class="toc-text">代码生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB"><span class="toc-number">3.6.3.</span> <span class="toc-text">代码阅读</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81-1"><span class="toc-number">3.6.3.1.</span> <span class="toc-text">后端代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81-1"><span class="toc-number">3.6.3.2.</span> <span class="toc-text">前端代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%BF%81%E7%A7%BB"><span class="toc-number">3.6.4.</span> <span class="toc-text">代码迁移</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF%E6%94%B9%E9%80%A0"><span class="toc-number">4.</span> <span class="toc-text">代码模板改造</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Velocity%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">4.1.</span> <span class="toc-text">Velocity模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">4.1.1.</span> <span class="toc-text">快速入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AI%E8%BE%85%E5%8A%A9%E8%A7%A3%E8%AF%BBVelocity%E8%AF%AD%E6%B3%95"><span class="toc-number">4.1.2.</span> <span class="toc-text">AI辅助解读Velocity语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%B5%81%E7%A8%8B"><span class="toc-number">4.1.3.</span> <span class="toc-text">代码生成流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90Lombok"><span class="toc-number">4.2.</span> <span class="toc-text">集成Lombok</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90MyBatis-Plus"><span class="toc-number">4.3.</span> <span class="toc-text">集成MyBatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E9%80%A0%E6%8A%A4%E7%90%86%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81"><span class="toc-number">4.3.1.</span> <span class="toc-text">改造护理项目代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E9%80%A0%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF"><span class="toc-number">4.3.2.</span> <span class="toc-text">改造代码生成模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85"><span class="toc-number">4.3.3.</span> <span class="toc-text">字段自动填充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E6%B5%8B%E8%AF%95"><span class="toc-number">4.3.4.</span> <span class="toc-text">字段自动填充测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90Swagger"><span class="toc-number">4.4.</span> <span class="toc-text">集成Swagger</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E5%8D%87%E7%BA%A7"><span class="toc-number">4.5.</span> <span class="toc-text">日期类型升级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BF%AE%E6%94%B9"><span class="toc-number">4.6.</span> <span class="toc-text">其他修改</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91"><span class="toc-number">5.</span> <span class="toc-text">前后端快速开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A4%E7%90%86%E9%A1%B9%E7%9B%AE%E9%A1%B5%E9%9D%A2%E6%94%B9%E9%80%A0"><span class="toc-number">5.1.</span> <span class="toc-text">护理项目页面改造</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%94%B9%E9%80%A0"><span class="toc-number">5.1.1.</span> <span class="toc-text">列表改造</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%8F%B7%E5%A4%84%E7%90%86"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">序号处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%B1%95%E7%A4%BA%E5%A4%84%E7%90%86"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">时间展示处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A0%B7%E5%BC%8F%E8%B0%83%E6%95%B4"><span class="toc-number">5.1.1.3.</span> <span class="toc-text">状态样式调整</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.1.2.</span> <span class="toc-text">新增状态查询条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%81%E7%94%A8%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-number">5.1.3.</span> <span class="toc-text">禁用功能开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8"><span class="toc-number">5.2.</span> <span class="toc-text">数据字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.1.</span> <span class="toc-text">数据字典的使用方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E9%80%A0%E6%96%B0%E5%A2%9E%E6%8A%A4%E7%90%86%E9%A1%B9%E7%9B%AE%E5%BC%B9%E7%AA%97"><span class="toc-number">5.3.</span> <span class="toc-text">改造新增护理项目弹窗</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E7%8A%B6%E6%80%81%E4%B8%8D%E5%9B%9E%E6%98%BE%E9%97%AE%E9%A2%98"><span class="toc-number">5.4.</span> <span class="toc-text">修改数据状态不回显问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OSS%E9%9B%86%E6%88%90"><span class="toc-number">6.</span> <span class="toc-text">OSS集成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">6.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAOSS%E6%A8%A1%E5%9D%97"><span class="toc-number">6.2.</span> <span class="toc-text">创建OSS模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E8%AF%B4%E6%98%8E"><span class="toc-number">6.2.1.</span> <span class="toc-text">方案说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E6%AD%A5%E9%AA%A4"><span class="toc-number">6.2.2.</span> <span class="toc-text">集成步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E7%9A%84%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">6.3.</span> <span class="toc-text">阅读文件上传相关的前端代码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-number">7.</span> <span class="toc-text">定时任务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="toc-number">7.1.</span> <span class="toc-text">定时任务概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cron%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">7.2.</span> <span class="toc-text">cron表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringTask%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">7.3.</span> <span class="toc-text">SpringTask入门案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%A5%E4%BE%9D%E4%B8%AD%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.4.</span> <span class="toc-text">若依中定时任务的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">7.4.1.</span> <span class="toc-text">编写后端代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1"><span class="toc-number">7.4.2.</span> <span class="toc-text">在系统中创建任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E6%9B%B4%E6%96%B0%E5%90%88%E5%90%8C%E7%8A%B6%E6%80%81"><span class="toc-number">7.4.3.</span> <span class="toc-text">定时更新合同状态</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">8.</span> <span class="toc-text">父子组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">8.1.</span> <span class="toc-text">设计思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-1"><span class="toc-number">8.2.</span> <span class="toc-text">父子组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-number">8.2.1.</span> <span class="toc-text">父组件向子组件传递数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6%E5%90%91%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-number">8.2.2.</span> <span class="toc-text">子组件向父组件传递数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E6%9E%84%E5%BB%BA"><span class="toc-number">9.</span> <span class="toc-text">表单构建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E6%9E%84%E5%BB%BA%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E"><span class="toc-number">9.1.</span> <span class="toc-text">表单构建功能说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E7%BB%84%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">基本信息组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8B%A5%E4%BE%9D%E4%B8%AD%E7%9A%84%E7%BC%93%E5%AD%98%E4%BD%BF%E7%94%A8"><span class="toc-number">10.</span> <span class="toc-text">若依中的缓存使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0%E7%BC%93%E5%AD%98"><span class="toc-number">10.1.</span> <span class="toc-text">功能接口添加缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E9%9C%80%E8%A6%81%E6%B7%BB%E5%8A%A0%E6%94%BE%E5%88%B0%E7%BC%93%E5%AD%98%E4%B8%AD"><span class="toc-number">10.1.1.</span> <span class="toc-text">哪些数据需要添加放到缓存中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E4%BD%BF%E7%94%A8%E7%AD%96%E7%95%A5"><span class="toc-number">10.1.2.</span> <span class="toc-text">缓存使用策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%BC%93%E5%AD%98%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">10.1.2.1.</span> <span class="toc-text">添加缓存的思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%80%9D%E8%B7%AF"><span class="toc-number">10.1.2.2.</span> <span class="toc-text">数据同步思路</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/archives/4c776360.html" title="EasyExcel（报表导出）">EasyExcel（报表导出）</a><time datetime="2026-01-16T09:04:36.000Z" title="发表于 2026-01-16 17:04:36">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/archives/30ee4bff.html" title="XXL-JOB">XXL-JOB</a><time datetime="2026-01-16T08:58:34.000Z" title="发表于 2026-01-16 16:58:34">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/archives/27717283.html" title="Jmeter快速入门">Jmeter快速入门</a><time datetime="2026-01-16T08:43:23.000Z" title="发表于 2026-01-16 16:43:23">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/archives/2040d45d.html" title="Canal">Canal</a><time datetime="2026-01-16T08:30:26.000Z" title="发表于 2026-01-16 16:30:26">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/archives/d48132d3.html" title="ElasticSearch">ElasticSearch</a><time datetime="2026-01-16T08:30:26.000Z" title="发表于 2026-01-16 16:30:26">2026-01-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2026 By Zhao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="/js/header_bg.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>